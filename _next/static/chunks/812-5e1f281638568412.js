"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{80582:function(e,s,t){t.d(s,{N:function(){return R}});var n=t(85893),l=t(67294),a=t(37094),r=t(30080),i=t(57588),o=t(27136),c=t(52091),x=t(76312),d=t(9186);let h=x.fC,u=x.xz,m=l.forwardRef((e,s)=>{let{className:t,align:l="center",sideOffset:a=4,...r}=e;return(0,n.jsx)(x.h_,{children:(0,n.jsx)(x.VY,{ref:s,align:l,sideOffset:a,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});m.displayName=x.VY.displayName;var j=t(93513),p=t(92290);let f=[{duration:5,value:9}],g=[{title:"can skip",text:"Grinder will skip this step if portafilter is not in position"},{title:"must wait",text:"Grinder will wait until the portafilter is in position"}],v=[{title:"pressure sensor",text:"Use the external pressure sensor to feedback"},{title:"flowrate profiler",text:"Use the flowrate to feedback"}],b=(e,s)=>{let t=[];return e.map((e,l)=>{t.push((0,n.jsx)(w,{title:e.title,text:e.text,onClick:()=>{s(e.title)}},l))}),(0,n.jsx)("div",{className:"grid gap-4 ",children:(0,n.jsx)("div",{className:"grid gap-2",children:t})})},N=e=>{let{text:s}=e;return s.split(" ").map((e,s)=>(0,n.jsx)("h1",{className:"text-xl",children:e},s))},w=e=>{let{title:s,text:t,onClick:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:l,children:[(0,n.jsx)("h1",{className:"text-xl",children:s}),(0,n.jsx)("h3",{className:"text-sm text-gray-500",children:t})]})},C=e=>{let{value:s,onChange:t}=e,[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsxs)(h,{onOpenChange:e=>{r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:"text-orange-900 text-xl underline decoration-pink-500 font-bold",onClick:()=>{r(!0)},children:s||"Action"})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:(0,n.jsx)("div",{className:"grid gap-4 ",children:(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(w,{title:"Grind",text:"Start by having perfect dose of coffee",onClick:()=>{t("Grind")}}),(0,n.jsx)(i.Z,{}),(0,n.jsx)(w,{title:"Extract",text:"Let the pump work its magic",onClick:()=>{t("Extract")}}),(0,n.jsx)(i.Z,{}),(0,n.jsx)(w,{title:"Rest",text:"Patience is key for a cup of perfection",onClick:()=>{t("Rest")}}),(0,n.jsx)(i.Z,{}),(0,n.jsx)(w,{title:"Profiling",text:"Fine tuning the pressure to enhance the flavour",onClick:()=>{t("Profiling")}})]})})})]})},k=e=>{let{value:s,onChange:t}=e,[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:"  text-xl text-blue-800 font-bold",onClick:()=>{r(!0)},children:s||"Action"})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:b(g,t)})]})})},y=e=>{let{value:s,onChange:t}=e,[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h,{onOpenChange:e=>{r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:" font-bold text-xl text-blue-800",onClick:()=>{r(!0)},children:s})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:b(v,t)})]})})},S=e=>{let{value:s,onChange:t}=e,[r,i]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{!1==e&&i(!1)},open:r,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{i(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," miligrams"]})})}),(0,n.jsxs)(m,{className:"w-96 rounded-xl border min-w-96",children:[(0,n.jsx)(a.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{i(!1)}}),(0,n.jsx)(o.RWL,{value:s,onChange:t,label:"Weight",type:"single",name:"value",minValue:0,maxValue:50,step:.1})]})]})},F=e=>{let{value:s,onChange:t}=e,[r,i]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{!1==e&&i(!1)},open:r,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{i(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," %"]})})}),(0,n.jsxs)(m,{className:"w-96 rounded-xl border min-w-96",children:[(0,n.jsx)(a.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{i(!1)}}),(0,n.jsx)(o.RWL,{value:s,onChange:t,label:"Weight",type:"single",name:"value",minValue:0,maxValue:100,step:5})]})]})},z=e=>{let{value:s,onChange:t,checked:r,toggleChecked:i}=e,[c,x]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{x(!1!=e)},open:c,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{x(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," ",s<=1?"second":"seconds"]})})}),(0,n.jsxs)(m,{className:"w-80 rounded-xl border  space-y-8",children:[(0,n.jsx)(a.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{x(!1)}}),(0,n.jsx)(o.RWL,{value:s,onChange:t,label:"Weight",type:"single",name:"value",minValue:0,maxValue:60,step:1}),(0,n.jsx)("div",{className:"select-none",children:(0,n.jsx)(o.xuv,{padding:24,background:r?"softOrange":"backgroundPrimary",onClick:()=>{i(!r)},cursor:{disabled:"notAllowed"},children:(0,n.jsxs)(o.oeA,{space:16,children:[(0,n.jsx)(o.sgG,{width:"content",children:(0,n.jsx)(o.XZJ,{"aria-label":"Toggle card selection",value:r,onChange:()=>{i(r)}})}),(0,n.jsxs)(o.Kqy,{space:8,children:[(0,n.jsx)(o.Dxz,{size:"medium",children:"Keep valve open"}),(0,n.jsx)(o.uTp,{size:"medium",children:"Keeping group valve open while resting will reduce the pressure at group"})]})]})})})]})]})},E=e=>{let{value:s,onChange:t}=e,[r,i]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{i(!1!=e)},open:r,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{i(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," ",s<=1?"second":"seconds"]})})}),(0,n.jsxs)(m,{className:"w-80 rounded-xl border  space-y-8",children:[(0,n.jsx)(a.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{i(!1)}}),(0,n.jsx)(o.RWL,{value:s,onChange:t,label:"Time",type:"single",name:"value",minValue:0,maxValue:60,step:1})]})]})},V=e=>{let{value:s,onChange:t}=e;console.log("action/ recreate");let[a,r]=(0,l.useState)(!1),{grinderSettings:o}=(0,p.Z)();return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:"font-bold text-xl "+(s?"text-blue-800":"text-red-500"),onClick:()=>{r(!0)},children:s||"[select grinder]"})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:(0,n.jsx)("div",{className:"grid gap-4 ",children:(0,n.jsx)("div",{className:"grid gap-2",children:o.map((e,s)=>(0,n.jsxs)(n.Fragment,{children:[!!s&&(0,n.jsx)(i.Z,{}),(0,n.jsx)(w,{title:e.name,text:"over "+e.connectionType+" with id "+e.connectionId,onClick:()=>{t(e.name)}})]}))})})})]})})};function R(e){let{onDelete:s,...t}=e,[a,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[x,d]=(0,l.useState)("can skip"),[h,u]=(0,l.useState)(10),[m,j]=(0,l.useState)(null),[p,g]=(0,l.useState)(5),[v,b]=(0,l.useState)(100),[w,E]=(0,l.useState)("close"),[R,P]=(0,l.useState)("pressure sensor"),[W,A]=(0,l.useState)(!1),[M,G]=(0,l.useState)(f);return(0,n.jsxs)("div",{className:"flex flex-col  h-fit rounded-xl p-4 max-w-[calc(90vw)] w-96  border hover:border-blue-500  bg-white drop-shadow-xl hover:scale-105 transition-transform duration-200",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 p-2 cursor-pointer",onClick:()=>s(),children:(0,n.jsx)(r.maG,{className:"text-gray-300"})}),(0,n.jsxs)("div",{className:"inline-flex flex-wrap gap-2 items-center text-wrap max-w-96 space-x-1",children:[(0,n.jsx)(C,{value:o,onChange:c}),"Grind"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S,{value:h,onChange:u}),(0,n.jsx)("h1",{className:" text-xl",children:"of"}),(0,n.jsx)(V,{value:m,onChange:j}),(0,n.jsx)("h1",{className:" text-xl",children:"bean, "}),(0,n.jsx)("h1",{className:" text-xl",children:"grinder"}),(0,n.jsx)(k,{value:x,onChange:d}),"can skip"===x?(0,n.jsx)(N,{text:"this step is portafilter is absent"}):(0,n.jsx)(N,{text:"until portafilter is present"})]}),"Extract"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" text-xl",children:"a shot of"}),(0,n.jsx)(S,{value:h,onChange:u}),(0,n.jsx)("h1",{className:" text-xl",children:"with pump"}),(0,n.jsx)("h1",{className:" text-xl",children:"power of"}),(0,n.jsx)(F,{value:v,onChange:b})]}),"Rest"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" text-xl",children:"for"}),(0,n.jsx)(z,{value:p,onChange:g,checked:W,toggleChecked:A}),W&&(0,n.jsx)(N,{text:"but keep valve open"})]}),"Profiling"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" text-xl",children:"to extract"}),(0,n.jsx)(S,{value:h,onChange:u}),(0,n.jsx)("h1",{className:" text-xl",children:"of espresso"}),(0,n.jsx)("h1",{className:" text-xl",children:"using"}),(0,n.jsx)(y,{value:R,onChange:P}),(0,n.jsx)(Z,{segments:M,setSegments:G,sensor:R}),(0,n.jsx)(O,{segments:M,sensor:R})]})]})]})}let Z=e=>{let{segments:s,setSegments:t,sensor:l}=e,a=s.length,r=s.map((e,r)=>(0,n.jsxs)("div",{className:"flex flex-rol flex-wrap",children:[0==r?(0,n.jsx)("h1",{className:"text-xl",children:"First, reach "}):(0,n.jsx)("h1",{className:"text-xl",children:"then"}),(0,n.jsx)(P,{segments:s,sensor:l,setSegments:t,idx:r}),0==r?(0,n.jsx)("h1",{className:"text-xl",children:"within"}):(0,n.jsx)("h1",{className:"text-xl",children:"in"}),(0,n.jsx)(E,{value:s[r].duration,onChange:e=>{t((0,j.Uy)(s,s=>{s[r].duration=e}))}}),(0,n.jsx)("h1",{className:"text-xl",children:r===a-1?".":","})]},r));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)("ul",{children:r}),(0,n.jsxs)("div",{className:"flex flex-row space-x-1 p-2  h-6 w-fit rounded-md bg-blue-100 items-center hover:scale-105 transition-transform duration-200 cursor-pointer",children:[(0,n.jsx)(c.wEH,{color:"#1180EF",size:16,onClick:()=>{console.log("add segment",{segments:s}),t((0,j.Uy)(s,e=>{e.push({duration:Math.floor(30*Math.random()),value:+(8*Math.random()+2).toFixed(1)})}))}}),(0,n.jsx)(c.iFH,{color:"#1180EF",size:16,onClick:()=>{console.log("remove segment",{segments:s}),s.length>1&&t((0,j.Uy)(s,e=>{e.splice(-1)}))}})]})]})},O=e=>{let{segments:s,sensor:t}=e,[a,r]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=[],n=0;s.forEach(e=>{n+=e.duration}),console.log("Render Chart",{segments:s,totalTime:n});var l=0;for(let n of s){for(var a=0;a<n.duration;a+=.1){var i=l+(n.value-l)*(a/n.duration);i=Math.round(10*i)/10,"pressure sensor"==t?e.push({pressure:i,max:10,min:0}):e.push({flowrate:i,max:50,min:0})}l=n.value,n.duration}r(e)},[s,t]),(0,n.jsx)("div",{className:"w-full -translate-x-10 hover:scale-120 transition-transform duration-200",children:(0,n.jsx)(o.wWH,{height:300,dataKey:"time",categories:["pressure sensor"==t?"pressure":"flowrate","max","min"],hideLegend:!1,hideXAxis:!1,hideYAxis:!1,data:a,disableAnimation:!0})})},P=e=>{let{segments:s,setSegments:t,sensor:a,idx:r}=e,[i,c]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),!1==e&&c(!1)},open:i,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{c(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s[r].value," ","pressure sensor"===a?"bar":"mg/s"]})})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border min-w-96",children:(0,n.jsx)(o.RWL,{value:s[r].value,onChange:e=>{t((0,j.Uy)(s,s=>{s[r].value=e}))},label:"pressure sensor"===a?"Pressure":"Flowrate",type:"single",name:"value",minValue:0,maxValue:"pressure sensor"===a?10:100,step:.1})})]})}},57588:function(e,s,t){t.d(s,{Z:function(){return i}});var n=t(85893),l=t(67294),a=t(12780),r=t(9186);let i=l.forwardRef((e,s)=>{let{className:t,orientation:l="horizontal",decorative:i=!0,...o}=e;return(0,n.jsx)(a.f,{ref:s,decorative:i,orientation:l,className:(0,r.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",t),...o})});i.displayName=a.f.displayName},92290:function(e,s,t){var n=t(67294),l=t(64331);s.Z=()=>(0,n.useContext)(l.Tp)},9186:function(e,s,t){t.d(s,{cn:function(){return a}});var n=t(90512),l=t(98388);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.m6)((0,n.W)(s))}},83842:function(e,s,t){t.r(s),t.d(s,{default:function(){return u}});var n=t(85893),l=t(27136),a=t(61121),r=t(37094),i=t(94554),o=t(92290);t(67294);var c=t(11163),x=()=>{let{connectButtonDisplay:e}=(0,o.Z)(),{selectedPage:s,setSelectedPage:t}=(0,o.Z)(),i=(0,c.useRouter)();return(0,n.jsx)("div",{className:"flex justify-center w-full fixed bottom-0 bg-white z-50",children:(0,n.jsx)(l.eBu,{space:4,children:(0,n.jsxs)("div",{className:"flex justify-between  flex-row",children:[(0,n.jsx)(l.zxk,{hierarchy:"Formula"===s?"primary":"secondary",kind:"transparent",label:"Formula",icon:()=>(0,n.jsx)(a.h1P,{}),onPress:()=>{t("Formula"),i.push("/")}}),(0,n.jsx)(l.zxk,{hierarchy:"Setting"===s?"primary":"secondary",kind:"transparent",label:"Settings",icon:()=>(0,n.jsx)(r.Fnt,{}),onPress:()=>{t("Setting"),i.push("/setting")}})]})})})},d=t(30080),h=()=>{let{connectButtonStyle:e,connectButtonText:s,selectedPage:t}=(0,o.Z)();return(0,n.jsxs)("div",{className:"flex justify-between items-center m-4",children:[(0,n.jsx)(l.s01,{size:"small",children:t}),(0,n.jsx)(l.zxk,{label:s,hierarchy:"primary",icon:()=>(0,n.jsx)(d.Vdu,{}),onPress:()=>{(0,i.s0)()},kind:e})]})},u=e=>{let{children:s}=e;return(0,n.jsxs)(l.Kqy,{space:4,children:[(0,n.jsx)(h,{}),(0,n.jsx)("div",{className:"mb-[56px]",children:s}),(0,n.jsx)(x,{})]})}}}]);