"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{3170:function(e,s,t){t.d(s,{N:function(){return S}});var n=t(85893),l=t(67294),a=t(30080),r=t(12780),i=t(9186);let o=l.forwardRef((e,s)=>{let{className:t,orientation:l="horizontal",decorative:a=!0,...o}=e;return(0,n.jsx)(r.f,{ref:s,decorative:a,orientation:l,className:(0,i.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",t),...o})});o.displayName=r.f.displayName;var c=t(27136),x=t(52091),d=t(76312);let h=d.fC,u=d.xz,m=l.forwardRef((e,s)=>{let{className:t,align:l="center",sideOffset:a=4,...r}=e;return(0,n.jsx)(d.h_,{children:(0,n.jsx)(d.VY,{ref:s,align:l,sideOffset:a,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});m.displayName=d.VY.displayName;var j=t(93513);let p=e=>{let{title:s,text:t,onClick:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:l,children:[(0,n.jsx)("h1",{className:"text-xl",children:s}),(0,n.jsx)("h3",{className:"text-sm text-gray-500",children:t})]})},g=e=>{let{value:s,onChange:t}=e;console.log("action/ recreate");let[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:"text-orange-900  text-xl underline decoration-pink-500 font-bold",onClick:()=>{r(!0)},children:s||"Action"})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:(0,n.jsx)("div",{className:"grid gap-4 ",children:(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(p,{title:"Grind",text:"Start by having perfect dose of coffee",onClick:()=>{t("Grind")}}),(0,n.jsx)(o,{}),(0,n.jsx)(p,{title:"Extract",text:"Let the pump work its magic",onClick:()=>{t("Extract")}}),(0,n.jsx)(o,{}),(0,n.jsx)(p,{title:"Rest",text:"Patience is key for a cup of perfection",onClick:()=>{t("Rest")}}),(0,n.jsx)(o,{}),(0,n.jsx)(p,{title:"Profiling",text:"Fine tuning the pressure to enhance the flavour",onClick:()=>{t("Profiling")}})]})})})]})})},f=e=>{let{value:s,onChange:t}=e;console.log("action/ recreate");let[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:"  text-xl text-blue-800 font-bold",onClick:()=>{r(!0)},children:s||"Action"})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:(0,n.jsx)("div",{className:"grid gap-4 ",children:(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(p,{title:"can skip",text:"Grinder will skip this step if portafilter is not in position",onClick:()=>{t("can skip")}}),(0,n.jsx)(o,{}),(0,n.jsx)(p,{title:"must wait",text:"Grinder will wait until the portafilter is in position",onClick:()=>{t("must wait")}})]})})})]})})},v=e=>{let{value:s,onChange:t}=e;console.log("action/ recreate");let[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:" font-bold text-xl text-blue-800",onClick:()=>{r(!0)},children:s||"Action"})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:(0,n.jsx)("div",{className:"grid gap-4 ",children:(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(p,{title:"pressure sensor",text:"Use the external pressure sensor to feedback",onClick:()=>{t("pressure sensor")}}),(0,n.jsx)(o,{}),(0,n.jsx)(p,{title:"flowrate profiler",text:"Use the flowrate to feedback",onClick:()=>{t("flowrate profiler")}})]})})})]})})},N=e=>{let{value:s,onChange:t}=e,[a,r]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),!1==e&&r(!1)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{r(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," miligrams"]})})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border min-w-96",children:(0,n.jsx)(c.RWL,{value:s,onChange:t,label:"Weight",type:"single",name:"value",minValue:0,maxValue:50,step:.1})})]})},b=e=>{let{value:s,onChange:t}=e,[a,r]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),!1==e&&r(!1)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{r(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," %"]})})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border min-w-96",children:(0,n.jsx)(c.RWL,{value:s,onChange:t,label:"Weight",type:"single",name:"value",minValue:0,maxValue:100,step:5})})]})},w=e=>{let{value:s,onChange:t,checked:a,toggleChecked:r}=e,[i,o]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{o(!1!=e)},open:i,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{o(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," ",s<=1?"second":"seconds"]})})}),(0,n.jsxs)(m,{className:"w-80 rounded-xl border  space-y-8",children:[(0,n.jsx)(c.RWL,{value:s,onChange:t,label:"Weight",type:"single",name:"value",minValue:0,maxValue:60,step:1}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)(c.xuv,{padding:24,background:a?"softOrange":"backgroundPrimary",onClick:()=>{r(!a)},cursor:{disabled:"notAllowed"},children:(0,n.jsxs)(c.oeA,{space:16,children:[(0,n.jsx)(c.sgG,{width:"content",children:(0,n.jsx)(c.XZJ,{"aria-label":"Toggle card selection",value:a,onChange:()=>{r(a)}})}),(0,n.jsxs)(c.Kqy,{space:8,children:[(0,n.jsx)(c.Dxz,{size:"medium",children:"Keep valve open"}),(0,n.jsx)(c.uTp,{size:"medium",children:"Keeping group valve open while resting will reduce the pressure at group"})]})]})})})]})]})},C=e=>{let{value:s,onChange:t}=e,[a,r]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{r(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s," ",s<=1?"second":"seconds"]})})}),(0,n.jsx)(m,{className:"w-80 rounded-xl border  space-y-8",children:(0,n.jsx)(c.RWL,{value:s,onChange:t,label:"Time",type:"single",name:"value",minValue:0,maxValue:60,step:1})})]})},k=[{ingredient:"Arabica",connectionType:"Bluetooth",connectionId:12},{ingredient:"Culi",connectionType:"Bluetooth",connectionId:12},{ingredient:"Mix",connectionType:"Bluetooth",connectionId:12}],y=e=>{let{value:s,onChange:t}=e;console.log("action/ recreate");let[a,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{r(!1)},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),r(!1!=e)},open:a,children:[(0,n.jsx)(u,{children:(0,n.jsx)("h1",{className:"text-orange-900 font-bold text-xl text-blue-800",onClick:()=>{r(!0)},children:s||"Action"})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border",children:(0,n.jsx)("div",{className:"grid gap-4 ",children:(0,n.jsx)("div",{className:"grid gap-2",children:k.map((e,s)=>(0,n.jsxs)(n.Fragment,{children:[!!s&&(0,n.jsx)(o,{}),(0,n.jsx)(p,{title:e.ingredient,text:"over "+e.connectionType+" with id "+e.connectionId,onClick:()=>{t(e.ingredient)}})]}))})})})]})})};function S(e){let{onDelete:s,...t}=e,[r,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[x,d]=(0,l.useState)("can skip"),[h,u]=(0,l.useState)(10),[m,j]=(0,l.useState)(null),[p,C]=(0,l.useState)(5),[k,S]=(0,l.useState)(100),[E,A]=(0,l.useState)("close"),[V,R]=(0,l.useState)("pressure sensor"),[O,P]=(0,l.useState)(!1),[W,L]=(0,l.useState)([{duration:5,value:9}]);return(0,n.jsxs)("div",{className:"flex flex-col  h-fit rounded-xl p-4 max-w-[calc(90vw)] w-96  border hover:border-blue-500  bg-white drop-shadow-xl hover:scale-105 transition-transform duration-200",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 p-2 cursor-pointer",onClick:()=>s(),children:(0,n.jsx)(a.maG,{className:"text-gray-300"})}),(0,n.jsxs)("div",{className:"inline-flex flex-wrap gap-2 items-center text-wrap max-w-96 space-x-1",children:[(0,n.jsx)(g,{value:o,onChange:c}),"Grind"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{value:h,onChange:u}),(0,n.jsx)("h1",{className:" text-xl",children:"of"}),(0,n.jsx)(y,{value:m,onChange:j}),(0,n.jsx)("h1",{className:" text-xl",children:"bean, "}),(0,n.jsx)("h1",{className:" text-xl",children:"grinder"}),(0,n.jsx)(f,{value:x,onChange:d}),"can skip"===x?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)("h1",{className:"text-xl",children:"this step"}),(0,n.jsx)("h1",{className:"text-xl",children:"if portafilter"}),(0,n.jsx)("h1",{className:"text-xl",children:"is absent"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-xl",children:"until"}),(0,n.jsx)("h1",{className:"text-xl",children:"portafilter"}),(0,n.jsx)("h1",{className:"text-xl",children:"is present"})]})]}),"Extract"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" text-xl",children:"a shot of"}),(0,n.jsx)(N,{value:h,onChange:u}),(0,n.jsx)("h1",{className:" text-xl",children:"with pump"}),(0,n.jsx)("h1",{className:" text-xl",children:"power of"}),(0,n.jsx)(b,{value:k,onChange:S})]}),"Rest"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" text-xl",children:"for"}),(0,n.jsx)(w,{value:p,onChange:C,checked:O,toggleChecked:P}),O&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-xl",children:"but"}),(0,n.jsx)("h1",{className:"text-xl",children:"keep"}),(0,n.jsx)("h1",{className:"text-xl",children:"valve"}),(0,n.jsx)("h1",{className:"text-xl",children:"open"})]})]}),"Profiling"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" text-xl",children:"to extract"}),(0,n.jsx)(N,{value:h,onChange:u}),(0,n.jsx)("h1",{className:" text-xl",children:"of espresso"}),(0,n.jsx)("h1",{className:" text-xl",children:"using"}),(0,n.jsx)(v,{value:V,onChange:R}),(0,n.jsx)(F,{segments:W,setSegments:L,sensor:V}),(0,n.jsx)(z,{segments:W,sensor:V})]})]})]})}let F=e=>{let{segments:s,setSegments:t,sensor:l}=e,a=s.length,r=s.map((e,r)=>(0,n.jsxs)("div",{className:"flex flex-rol flex-wrap",children:[0==r?(0,n.jsx)("h1",{className:"text-xl",children:"First, reach "}):(0,n.jsx)("h1",{className:"text-xl",children:"then"}),(0,n.jsx)(E,{segments:s,sensor:l,setSegments:t,idx:r}),0==r?(0,n.jsx)("h1",{className:"text-xl",children:"within"}):(0,n.jsx)("h1",{className:"text-xl",children:"in"}),(0,n.jsx)(C,{value:s[r].duration,onChange:e=>{t((0,j.Uy)(s,s=>{s[r].duration=e}))}}),(0,n.jsx)("h1",{className:"text-xl",children:r===a-1?".":","})]},r));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{}),(0,n.jsx)("ul",{children:r}),(0,n.jsxs)("div",{className:"flex flex-row space-x-1 p-2  h-6 w-fit rounded-md bg-blue-100 items-center hover:scale-105 transition-transform duration-200 cursor-pointer",children:[(0,n.jsx)(x.wEH,{color:"#1180EF",size:16,onClick:()=>{console.log("add segment",{segments:s}),t((0,j.Uy)(s,e=>{e.push({duration:Math.floor(30*Math.random()),value:+(8*Math.random()+2).toFixed(1)})}))}}),(0,n.jsx)(x.iFH,{color:"#1180EF",size:16,onClick:()=>{console.log("remove segment",{segments:s}),s.length>1&&t((0,j.Uy)(s,e=>{e.splice(-1)}))}})]})]})},z=e=>{let{segments:s,sensor:t}=e,[a,r]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=[],n=0;s.forEach(e=>{n+=e.duration}),console.log("Render Chart",{segments:s,totalTime:n});var l=0;for(let n of s){for(var a=0;a<n.duration;a+=.1){var i=l+(n.value-l)*(a/n.duration);i=Math.round(10*i)/10,"pressure sensor"==t?e.push({pressure:i,max:10,min:0}):e.push({flowrate:i,max:50,min:0})}l=n.value,n.duration}r(e)},[s,t]),(0,n.jsx)("div",{className:"w-full -translate-x-10 hover:scale-120 transition-transform duration-200",children:(0,n.jsx)(c.wWH,{height:300,dataKey:"time",categories:["pressure sensor"==t?"pressure":"flowrate","max","min"],hideLegend:!1,hideXAxis:!1,hideYAxis:!1,data:a,disableAnimation:!0})})},E=e=>{let{segments:s,setSegments:t,sensor:a,idx:r}=e,[i,o]=(0,l.useState)(!1);return(0,n.jsxs)(h,{onOpenChange:e=>{console.log("close",e),!1==e&&o(!1)},open:i,children:[(0,n.jsx)(u,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{o(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s[r].value," ","pressure sensor"===a?"bar":"mg/s"]})})}),(0,n.jsx)(m,{className:"w-96 rounded-xl border min-w-96",children:(0,n.jsx)(c.RWL,{value:s[r].value,onChange:e=>{t((0,j.Uy)(s,s=>{s[r].value=e}))},label:"pressure sensor"===a?"Pressure":"Flowrate",type:"single",name:"value",minValue:0,maxValue:"pressure sensor"===a?10:100,step:.1})})]})}},92290:function(e,s,t){var n=t(67294),l=t(64331);s.Z=()=>(0,n.useContext)(l.Tp)},9186:function(e,s,t){t.d(s,{cn:function(){return a}});var n=t(90512),l=t(98388);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.m6)((0,n.W)(s))}},83842:function(e,s,t){t.r(s),t.d(s,{default:function(){return m}});var n=t(85893),l=t(27136),a=t(61121),r=t(36977),i=t(37094),o=t(94554),c=t(92290);t(67294);var x=t(11163),d=()=>{let{connectButtonDisplay:e}=(0,c.Z)(),{selectedPage:s,setSelectedPage:t}=(0,c.Z)(),o=(0,x.useRouter)();return(0,n.jsx)("div",{className:"flex justify-center w-full fixed bottom-0 bg-white z-50",children:(0,n.jsx)(l.eBu,{space:4,children:(0,n.jsxs)("div",{className:"flex justify-between  flex-row",children:[(0,n.jsx)(l.zxk,{hierarchy:"Formula"===s?"primary":"secondary",kind:"transparent",label:"Formula",icon:()=>(0,n.jsx)(a.h1P,{}),onPress:()=>{t("Formula"),o.push("/")}}),(0,n.jsx)(l.zxk,{hierarchy:"Alchemy"===s?"primary":"secondary",kind:"transparent",label:"Lab",icon:()=>(0,n.jsx)(r.b6W,{}),onPress:()=>{t("Alchemy"),o.push("/lab")}}),(0,n.jsx)(l.zxk,{hierarchy:"Setting"===s?"primary":"secondary",kind:"transparent",label:"Settings",icon:()=>(0,n.jsx)(i.Fnt,{}),onPress:()=>{t("Setting"),o.push("/setting")}})]})})})},h=t(30080),u=()=>{let{connectButtonStyle:e,connectButtonText:s,selectedPage:t}=(0,c.Z)();return(0,n.jsxs)("div",{className:"flex justify-between items-center m-4",children:[(0,n.jsx)(l.s01,{size:"small",children:t}),(0,n.jsx)(l.zxk,{label:s,hierarchy:"primary",icon:()=>(0,n.jsx)(h.Vdu,{}),onPress:()=>{(0,o.s0)()},kind:e})]})},m=e=>{let{children:s}=e;return(0,n.jsxs)(l.Kqy,{space:4,children:[(0,n.jsx)(u,{}),(0,n.jsx)("div",{className:"mb-[56px]",children:s}),(0,n.jsx)(d,{})]})}}}]);