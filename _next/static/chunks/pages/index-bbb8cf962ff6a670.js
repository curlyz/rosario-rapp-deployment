(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(407)}])},407:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return k}});var t,l,a=o(5893),s=o(1163),n=o(9968),i=o(8979),d=o(5282);o(4554),o(6839),(t=l||(l={})).Espresso="Espresso",t.Teapresso="Teapresso",t.PourOver="PourOver";var u=o(2777),c=o(7094),g=o(1054),m=o(80),b=o(2290);function h(e){let{formula:r,onClickEdit:o,onClick:t,...s}=e,{draggable:n}=(0,b.Z)();return(0,a.jsxs)("div",{className:"border rounded-xl ".concat(r.backdrop,"  w-full h-full flex flex-col  transition-transform duration-200 hover:border-blue-500  items-center  justify-center shadow-large border border-white cursor-pointer select-none"),onMouseDown:e=>{t(),console.log("profile/ clicked")},children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 flex flex-col  items-center justify-between",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"hover:opacity-50",onMouseDown:e=>{o(),e.preventDefault(),e.stopPropagation()},onTouchStart:e=>{o(),e.preventDefault(),e.stopPropagation()},children:(0,a.jsx)(d.DVr,{size:32,className:"text-white m-1 "})}),(0,a.jsx)("button",{children:(0,a.jsx)(u.uWH,{size:20,className:"text-white m-1 drag-handle"})})]}):(0,a.jsxs)("div",{className:"opacity-20 m-1",children:[r.formulaType===l.Espresso&&(0,a.jsx)(g.q_H,{size:32,className:"text-white m-1"}),r.formulaType===l.Teapresso&&(0,a.jsx)(c.QFv,{size:32,className:"text-white m-1"}),r.formulaType===l.PourOver&&(0,a.jsx)(m.e0F,{size:32,className:"text-white m-1"})]})}),(0,a.jsx)("h1",{className:"truncate text-clip text-balance text-xl text-center select-none text-white",children:r.title})]})}var f=o(7294),x=o(3513),p=o(6281),v=o(9600);let y=(0,n.WidthProvider)(n.Responsive),w=["bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tr from-yellow-900 via-red-600 to-yellow-500"],j=["bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500"],N=["bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-l from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500"];var k=()=>{let[e,r]=(0,f.useState)(!1),{formulas:o,setFormulas:t,addFormulaOpen:n,setAddFormulaOpen:d}=(0,b.Z)(),{layout:u,setLayout:c}=(0,b.Z)(),g=(0,s.useRouter)(),{showToast:m}=(0,v.pmc)(),{registerFormulaClick:k,registerSelectedFormulaId:P}=(0,b.Z)(),T=[];Object.values(o).forEach(e=>{let r=(0,a.jsx)("div",{className:"grid-item__title ",children:(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(h,{formula:e,onClick:()=>{k(e.id)},onClickEdit:()=>{P(e.id),g.push("/lab")}},e.id)})},e.id);T.push(r)});let{draggable:_}=(0,b.Z)(),[E,O]=(0,f.useState)("New Formula"),[z,C]=(0,f.useState)(l.Espresso);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(i.default,{children:[(0,a.jsx)("div",{className:"h-[80vh] dark:bg-gray",children:(0,a.jsx)(y,{compactType:null,className:"layout relative",layouts:u,isDraggable:_,isResizable:_,useCSSTransforms:!1,draggableHandle:".drag-handle",breakpoints:{lg:1280,md:992,sm:767,xs:430,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},onLayoutChange:(o,t)=>{if(!e){r(!0);return}c(t)},onDragStart:()=>{console.log("OnDragStart")},children:T})}),n&&(0,a.jsx)(v.u_l,{title:"Add formula",onClose:()=>d(!1),primaryAction:{label:"OK",onPress:()=>{d(!1),function(){let e=(0,p.Vj)();c((0,x.Uy)(u,r=>{var o,t,l;null===(o=r.md)||void 0===o||o.push({i:e,x:0,y:0,w:1,h:1}),null===(t=r.xs)||void 0===t||t.push({i:e,x:0,y:0,w:1,h:1}),null===(l=r.sm)||void 0===l||l.push({i:e,x:0,y:0,w:1,h:1})})),t((0,x.Uy)(o,r=>{let o;z==l.Espresso?o=w[Math.floor(Math.random()*w.length)]:z==l.PourOver?o=N[Math.floor(Math.random()*N.length)]:z==l.Teapresso&&(o=j[Math.floor(Math.random()*j.length)]);let t={id:e,title:E,text:"New Formula",color:"gray",backdrop:o,formulaType:z};r[e]=t,console.log("fml/ create new",t)})),console.log("addFormula",{layout:u,formulas:o})}()}},secondaryAction:{label:"Cancel",onPress:()=>d(!1)},children:(0,a.jsxs)(v.Kqy,{space:4,children:[(0,a.jsx)(v.nvn,{label:"Formula Name",value:E,onChange:e=>{O(e)}}),(0,a.jsxs)(v.r5R,{space:4,columns:3,children:[(0,a.jsx)(v.zxk,{hierarchy:"primary",kind:z==l.Espresso?"solid":"outline",label:"Espresso",onPress:()=>{C(l.Espresso)}}),(0,a.jsx)(v.zxk,{hierarchy:"primary",kind:z==l.Teapresso?"solid":"outline",label:"Teapresso",onPress:()=>{C(l.Teapresso)}}),(0,a.jsx)(v.zxk,{hierarchy:"primary",kind:z==l.PourOver?"solid":"outline",label:"Pour over",onPress:()=>{C(l.PourOver)}})]})]})})]})})}}},function(e){e.O(0,[838,396,660,817,509,127,970,415,281,611,979,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);