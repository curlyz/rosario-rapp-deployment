(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{45824:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return t(11870)}])},77505:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(85893),l=t(67294),r=t(12780),n=t(23482);const i=l.forwardRef(((e,s)=>{let{className:t,orientation:l="horizontal",decorative:i=!0,...c}=e;return(0,a.jsx)(r.f,{ref:s,decorative:i,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",t),...c})}));i.displayName=r.f.displayName},11870:function(e,s,t){"use strict";t.r(s),t.d(s,{SettingsPage:function(){return E},default:function(){return K}});var a=t(85893),l=t(16702),r=t(86204),n=t(67294),i=t(65058),c=t(37039),o=t(93513),x=t(23482);const d=n.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})}));d.displayName="Card";const m=n.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("flex flex-col space-y-1.5 p-6",t),...l})}));m.displayName="CardHeader";const h=n.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,x.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})}));h.displayName="CardTitle";const u=n.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,x.cn)("text-sm text-muted-foreground",t),...l})}));u.displayName="CardDescription";const f=n.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("p-6 pt-0",t),...l})}));f.displayName="CardContent";const j=n.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("flex items-center p-6 pt-0",t),...l})}));j.displayName="CardFooter";var p=t(30080),w=t(59463);const g=e=>{let{index:s}=e;const{connected:t,calibration:r,setCalibration:x}=(0,i.Z)(),[j,g]=(0,n.useState)(new Array(100).fill({temperature:0,power:0})),{t:b}=(0,c.$G)(),{flowmeterDisplay:N}=(0,i.Z)(),[v,y]=(0,n.useState)(!1),k=(0,a.jsx)(a.Fragment,{}),[C,S]=(0,n.useState)(!0),[P,T]=(0,n.useState)(N[s].flowCount),[R,A]=(0,n.useState)(1e3);return(0,n.useEffect)((()=>{T(N[s].flowCount)}),[N,s]),(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)(l.u_l,{size:"small",title:b("Calibrate flowmeter"),onClose:()=>y(!1),primaryAction:{label:"OK",onPress:()=>{y(!1),function(){var e=P,t=e/N[s].flowCount*r.flowmeter[s];console.log("calibration/ ",{calibration:r,suggestedValue:e,previousValue:N[s].flowCount,currentCalibration:r.flowmeter[s],newCalibration:t}),t<0||t>1e3?console.warn("Invalid calibation"):x((0,o.Uy)(r,(e=>(e.flowmeter[s]=t,e))))}()}},secondaryAction:{label:"Cancel",onPress:()=>y(!1)},children:(0,a.jsxs)(l.Kqy,{space:8,children:[(0,a.jsx)(l.jL0,{kind:"informative",title:b("Notice"),description:b("This calibration process is to set the conversion between flowmeter pulses count with the actual total weight of water extracted, specify how much it is actually weight to update the conversion"),action:{label:b("Learn more"),onPress:()=>{window.open("https://www.google.com")}}}),(0,a.jsx)(l.RWL,{type:"single",name:"value",label:b("Real weight (gram)"),value:P,onChange:e=>{T(e)},minValue:0,maxValue:R,step:1})]})}),(0,a.jsxs)(d,{className:(0,w.cn)("w-auto border flex-grow bg-white h-full self-center hover:border-purple-700",N[s].flowRate>0?" text-green-900 border border-green-600":"border-black border text-black"),children:[(0,a.jsxs)(m,{children:[(0,a.jsxs)("div",{className:"flex justify-between space-x-1 items-center",children:[(0,a.jsxs)(h,{children:[b("Group")," ",s+1]}),(0,a.jsx)("button",{onClick:function(){0!=P&&(A(Math.max(2*P,200)),y(!0))},style:{borderRadius:"8px",border:"1px solid",padding:"8px"},className:"text-back bg-white hover:bg-black hover:text-white",children:(0,a.jsx)(p.b9P,{className:""})})]}),(0,a.jsx)(l.izJ,{}),(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"h-16  flex flex-col justify-evenly space-y-4 mt-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:b("Flowrate ")}),(0,a.jsxs)("h1",{className:"text-xl",children:[N[s].flowRate," gram/s"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:b("Weight")}),(0,a.jsxs)("h1",{className:"text-xl",children:[N[s].flowCount," gram"]})]})]})})]}),(0,a.jsx)(f,{children:C?(0,a.jsx)(a.Fragment,{children:k}):null})]})]})};var b=t(55903),N=t(64399),v=t(19151);const y=e=>{let{index:s}=e;var t;const{pidState:r,setPidState:x,pidDisplay:w}=(0,i.Z)(),{connected:g}=(0,i.Z)(),[y,k]=(0,n.useState)(new Array(100).fill({temperature:0,power:0})),C=(null===(t=y[-1])||void 0===t?void 0:t.temperature)||0;(0,n.useEffect)((()=>{if(void 0==w[s].powerSamples)return;const e=[];for(var t=0;t<w[s].powerSamples.length;t++)e.push({power:w[s].powerSamples[t],temperature:Math.round(10*w[s].temperatureSamples[t])/10,target:Math.round(10*r[s].targetTemperature)/10});k(e)}),[w,s,r]);const{t:S}=(0,c.$G)();(0,n.useEffect)((()=>{}),[w,s,r]);const P=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.RWL,{type:"single",name:"value",label:S("Temperature"),value:r[s].targetTemperature,onChange:e=>{x((0,o.Uy)(r,(t=>(t[s].targetTemperature=e,t))))},minValue:0,maxValue:200,step:1,disabled:!g})}),[T,R]=(0,n.useState)(!0),A=(0,a.jsxs)("div",{className:"flex flex-wrap justify-center space-x-1 space-y-1 mb-4",children:[(0,a.jsx)(l.zxk,{onPress:()=>{},hierarchy:"primary",kind:"outline",label:"Test",size:"small",icon:()=>(0,a.jsx)(v.WuV,{})}),(0,a.jsx)(l.zxk,{onPress:()=>{x((0,o.Uy)(r,(e=>{e[s].targetTemperature=110,e[s].activeRange=2,e[s].proportional=3.2,e[s].integral=.2,e[s].derivative=5})))},hierarchy:"danger",kind:"outline",size:"small",label:"Reset",icon:()=>(0,a.jsx)(N.Z4w,{})})]});return(0,a.jsxs)(d,{className:"w-auto",children:[(0,a.jsxs)(m,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(h,{children:[S("Channel")," ",s+1]}),(0,a.jsx)(l.rsf,{value:r[s].isActive,onChange:e=>{x((0,o.Uy)(r,(t=>(t[s].isActive=e,t))))},label:S("Active")})]}),(0,a.jsx)(b.j,{}),(0,a.jsx)(u,{children:r[s].isActive?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d,{className:"h-40 bg-white",children:(0,a.jsxs)("div",{className:"_chartDisplay ",children:[(0,a.jsx)(l.wWH,{hideLegend:!1,hideXAxis:!0,dataKey:"name",categories:["temperature","power","target"],disableAnimation:!0,hideYAxis:!0,hideTooltip:!1,data:y})," ",(0,a.jsxs)("div",{className:"right-32 top-32 text-red-200 flex flex-row m-4",children:[(0,a.jsx)("h1",{className:" text-9xl",children:C}),(0,a.jsx)("h1",{className:"text-xl",children:"\xb0C"})]})]})})}):(0,a.jsx)(a.Fragment,{children:S("This PID channel is currently disabled")})})]}),r[s].isActive?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{children:T?(0,a.jsxs)(a.Fragment,{children:[A,P]}):null}),(0,a.jsx)(j,{onClick:()=>{R(!T)},className:"justify-center",children:T?(0,a.jsx)(p.Faw,{}):(0,a.jsx)(p.Yc6,{})})]}):null]})};var k=t(15409),C=t(24862),S=t(22845),P=t(19314),T=t(11163),R=t(93181),A=t(7696),F=t(52091),L=t(11570);const _=e=>{let{index:s}=e;const{pidState:t,setPidState:r,pidDisplay:x,calibration:j,setCalibration:g,pressure:N,setPressure:v}=(0,i.Z)(),{connected:y}=(0,i.Z)(),{t:k}=(0,c.$G)(),[C,S]=(0,n.useState)(!1),[P,T]=(0,n.useState)(!0);return(0,a.jsxs)(a.Fragment,{children:[C&&(0,a.jsx)(l.u_l,{size:"small",title:k("Pressure sensor"),onClose:()=>S(!1),primaryAction:{label:"OK",onPress:()=>{S(!1)}},secondaryAction:{label:"Cancel",onPress:()=>S(!1)},children:(0,a.jsxs)(l.Kqy,{space:8,children:[(0,a.jsx)(l.jL0,{kind:"informative",title:k("Notice"),description:k("There are many type of pressure sensor, each will have a different measuring range. What is the range of your pressure sensor in MPa ?"),action:{label:k("Learn more"),onPress:()=>{window.open("https://www.google.com")}}}),(0,a.jsx)(l.RWL,{type:"single",name:"value",label:k("Max range (MPa)"),value:j.pressure[s],onChange:e=>{g((0,o.Uy)(j,(t=>{t.pressure[s]=e})))},minValue:0,maxValue:3.2,step:.1})]})}),(0,a.jsxs)(d,{className:(0,w.cn)("w-auto border flex-grow bg-white h-full self-center hover:border-purple-700"),children:[(0,a.jsxs)(m,{children:[(0,a.jsxs)("div",{className:"flex justify-between space-x-1 items-center",children:[(0,a.jsxs)(h,{children:[k("Group")," ",s+1]}),(0,a.jsx)("button",{onClick:()=>{S(!0)},style:{borderRadius:"8px",border:"1px solid",padding:"8px"},className:"text-back bg-white hover:bg-black hover:text-white",children:(0,a.jsx)(p.b9P,{className:""})})]}),(0,a.jsx)(b.j,{}),(0,a.jsx)(u,{children:(0,a.jsx)("div",{className:"h-8  flex flex-col justify-evenly space-y-4 mt-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:k("Pressure ")}),(0,a.jsxs)("h1",{className:"text-3xl",children:[N[s]," bar"]})]})})})]}),(0,a.jsx)(f,{})]})]})};var W=t(8714),I=t(77505);const G=e=>{let{index:s}=e;const{t:t}=(0,c.$G)(),[r,i]=(0,n.useState)(!0),[o,x]=(0,n.useState)(0);return(0,a.jsxs)(d,{className:"w-auto",children:[(0,a.jsxs)(m,{children:[(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsxs)(h,{children:[t("Group")," ",s+1]})}),(0,a.jsx)(b.j,{}),(0,a.jsx)(u,{})]}),(0,a.jsxs)(f,{className:"flex flex-col gap-4",children:[(0,a.jsx)(l.jL0,{kind:0==o?"positive":"warning",title:t("Current behaviour"),description:0==o?"Dispense water at group head":"Dispense hot water valve for ".concat(o," second, group head will NOT open")}),(0,a.jsx)(l.RWL,{type:"single",name:"value",label:t("Dose duration (seconds)"),value:o,onChange:e=>{x(e)},minValue:0,maxValue:10,step:.5})]}),(0,a.jsx)(j,{onClick:()=>{i(!r)},className:"justify-center"})]})},z=()=>{const{t:e}=(0,c.$G)(),[s,t]=(0,W._)("pidSettings",!1),[i,o]=(0,n.useState)(!1),x=()=>{t(!s)},d=(0,n.useRef)(null);return(0,a.jsxs)(k.w,{ref:d,className:"w-full max-w-2xl transform bg-gradient-to-r from-white to-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:x,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.YzZ,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:e("Heater")})]}),s?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),s?(0,a.jsxs)("div",{className:"p-4 gap-4",children:[(0,a.jsx)(l.jL0,{kind:"positive",title:"What is Heater ?",description:"There are 3 channel of PID-enabled heater. You can configure each channel with temperature setpoint. We support the following type of sensor: DS18B20, NTC(10K), NTC(100K). DS18B20 is strongly recommended"}),(0,a.jsxs)("div",{className:"flex w-full flex-col justify-center gap-4 mt-4",children:[(0,a.jsx)(y,{index:0}),(0,a.jsx)(y,{index:1}),(0,a.jsx)(y,{index:2})]}),(0,a.jsx)(S.i,{onClick:x,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null,i&&(0,a.jsx)(l.u_l,{title:"Calibrate flowmeter",size:"small",onClose:()=>o(!1),primaryAction:{label:"OK",onPress:()=>o(!1)},secondaryAction:{label:"Cancel",onPress:()=>o(!1)},autoFocus:!1,children:(0,a.jsx)(l.eBu,{space:4,children:(0,a.jsx)(l.uTp,{size:"medium",children:"Content"})})})]})},V=()=>{const[e,s]=(0,W._)("flowmeterSettings",!1),{t:t}=(0,c.$G)(),i=()=>{s(!e)},o=(0,n.useRef)(null);return(0,a.jsxs)(k.w,{ref:o,className:"w-full max-w-2xl transform bg-gradient-to-r bg-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:i,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(r.E3g,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:t("Flowmeter")})]}),e?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),e?(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(l.jL0,{kind:"positive",title:"What is flowmeter ?",description:"Flowmeter is used to measure how much water is going to the puck, note that this is not much coffee you get because there is always water losses inside the puck, or simply released"}),(0,a.jsx)(l.jL0,{kind:"informative",title:"How to calibrate ?",description:"First, place a scale underneath each group, press any water button. Water will come out, wait until it reach around 100 grams, hit stop. Then click the Calibrate button and input the ACTUAL weight",action:{label:"See Video",onPress:()=>{}}}),(0,a.jsxs)("div",{className:"flex w-full flex-row flex-wrap justify-evenly  h-fit gap-4",children:[(0,a.jsx)(g,{index:0}),(0,a.jsx)(g,{index:1}),(0,a.jsx)(g,{index:2})]}),(0,a.jsx)(S.i,{onClick:i,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},D=()=>{const[e,s]=(0,W._)("pressureSettings",!1),{t:t}=(0,c.$G)(),r=()=>{s(!e),console.log("toggle expand")},i=(0,n.useRef)(null);return(0,a.jsxs)(k.w,{ref:i,className:"w-full max-w-2xl transform bg-gradient-to-r from-white to-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:r,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(R.vlJ,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:t("Pressure")})]}),e?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),e?(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(l.jL0,{kind:"positive",title:"What is Pressure sensor ?",description:"Pressure sensor is used to measure the pressure at puck, this reflect. There is 2 channel on ROSARIO. To ensure every shot of espresso are the same, the machine will also check if the pressure profiling match it's previous and display error. Normally due to wrong coffee compression method"}),(0,a.jsx)(l.jL0,{kind:"informative",title:"How to calibrate ?",description:"There are lots of pressure sensor type with different ranges. The highest pressure in coffee machine is around 12 bar (1.2Mpa) so you should get one above this limit and specify the range below.",action:{label:"See Video",onPress:()=>{}}}),(0,a.jsxs)("div",{className:"flex w-full flex-row flex-wrap justify-evenly  h-fit gap-4",children:[(0,a.jsx)(_,{index:0}),(0,a.jsx)(_,{index:1}),(0,a.jsx)(_,{index:2}),(0,a.jsx)(_,{index:3})]}),(0,a.jsx)(S.i,{onClick:r,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},Z=()=>{const{locale:e,locales:s,defaultLocale:t}=(0,T.useRouter)(),[r,o]=(0,W._)("keyboardSettings",!1),{grinderSettings:x}=(0,i.Z)(),{t:d}=(0,c.$G)(),m=()=>{o(!r)},h=(0,n.useRef)(null);return(0,a.jsxs)(k.w,{ref:h,className:"w-full max-w-2xl transform bg-gradient-to-r bg-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:m,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.Ll6,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:d("Keyboard")})]}),r?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(P.G,{className:"flex w-full flex-col justify-center space-y-4 py-4",children:[(0,a.jsx)(l.jL0,{kind:"informative",title:"Customize the behaviour",description:"In most coffee machine, there is a group button that normally will just dispense hot water. This button can also be configure to control the hot water line. You can change that behaviour here"}),(0,a.jsx)(G,{index:0}),(0,a.jsx)(G,{index:1}),(0,a.jsx)(G,{index:2})]}),(0,a.jsx)(S.i,{onClick:m,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},X=()=>{const{locale:e,locales:s,defaultLocale:t}=(0,T.useRouter)(),[r,o]=(0,W._)("networkSettings",!1),{grinderSettings:x}=(0,i.Z)(),{t:d}=(0,c.$G)(),m=()=>{o(!r),console.log("toggle expand")},h=(0,n.useRef)(null),[u,f]=(0,n.useState)(""),[j,w]=(0,n.useState)(""),[g,b]=(0,n.useState)("");return(0,a.jsxs)(k.w,{ref:h,className:"w-full max-w-2xl transform bg-gradient-to-tr bg-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:m,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(F._0,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:d("Network")})]}),r?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(P.G,{className:"flex w-full justify-center space-y-4 p-8",children:[(0,a.jsx)(l.jL0,{kind:"positive",title:d("Notice"),description:d("This will enable Internet connection for this machine, allowing it to display time, tracking the coffee quality by comparing flowmeter charts, notify business owner with daily report, ..."),action:{label:d("Learn more"),onPress:()=>{window.open("https://www.google.com")}}}),(0,a.jsxs)("div",{className:"flex flex-row justify-between w-full gap-4",children:[(0,a.jsx)("div",{className:"w-full flex-grow",children:(0,a.jsx)(l.nvn,{name:"Wifi",label:"Wifi",placeholder:"",value:u,onChange:e=>f(e)})}),(0,a.jsx)("div",{className:"w-full flex-grow",children:(0,a.jsx)(l.nvn,{name:"Password",label:"Password",placeholder:"",value:j,onChange:e=>w(e),type:"password"})})]}),(0,a.jsx)(l.nvn,{name:"Token",label:"Access Token",placeholder:"",value:g,onChange:e=>b(e),hint:"ANTLRXXXXXXXX"}),(0,a.jsx)(I.Z,{})]}),(0,a.jsx)(S.i,{onClick:m,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},E=()=>(0,a.jsx)(L.default,{children:(0,a.jsxs)("div",{className:" flex flex-col items-center  p-8 space-y-4",children:[(0,a.jsx)(z,{}),(0,a.jsx)(V,{}),(0,a.jsx)(D,{}),(0,a.jsx)(Z,{}),(0,a.jsx)(X,{})]})});var K=E}},function(e){e.O(0,[838,396,660,817,296,509,365,391,653,317,648,676,870,570,774,888,179],(function(){return s=45824,e(e.s=s);var s}));var s=e.O();_N_E=s}]);
//# sourceMappingURL=setting-8dcdeb4dd3a30334.js.map