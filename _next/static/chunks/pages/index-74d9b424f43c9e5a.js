(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(97092)}])},97092:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return N}});var r=o(85893),a=o(77797),l=o(65058),s=o(80907),n=o(67294),i=o(2777),d=o(71054),u=o(37094),c=o(30080),g=o(35282);function m(e){let{formulaId:t,onClickEdit:o,onClick:m}=e;var h,b,f;const{draggable:x,progressReport:v}=(0,l.Z)(),[p,y]=(0,n.useState)(0),w=(0,n.useRef)(null),{formulas:j,setFormulas:F}=(0,l.Z)();(0,n.useEffect)((()=>{w.current&&y(w.current.clientHeight)}));const N=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute right-0 top-0 flex flex-col  items-center justify-between",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"hover:opacity-50",onMouseDown:e=>{o(),e.preventDefault(),e.stopPropagation()},onTouchStart:e=>{o(),e.preventDefault(),e.stopPropagation()},children:(0,r.jsx)(g.DVr,{size:32,className:"m-1 text-white "})}),(0,r.jsx)("button",{children:(0,r.jsx)(i.uWH,{size:20,className:"drag-handle m-1 text-white"})})]}):(0,r.jsxs)("div",{className:"m-1 opacity-20",children:[j[t].formulaType===a.HF.Espresso&&(0,r.jsx)(d.q_H,{size:32,className:"m-1 text-white"}),j[t].formulaType===a.HF.Teapresso&&(0,r.jsx)(u.QFv,{size:32,className:"m-1 text-white"}),j[t].formulaType===a.HF.PourOver&&(0,r.jsx)(c.e0F,{size:32,className:"m-1 text-white"})]})}),(0,r.jsx)("h1",{className:"select-none truncate text-clip text-balance text-center text-xl text-white",children:j[t].title})]}),k=(0,r.jsxs)("div",{className:"first-letter absolute bottom-0  left-0 h-full w-full",children:[(0,r.jsx)(s.wWH,{height:p,dataKey:"name",categories:["flowrate"],hideLegend:!0,hideXAxis:!0,hideYAxis:!0,data:[...Array.from({length:10},((e,t)=>({name:"Point ".concat(t+1),flowrate:Math.floor(100*Math.random())})))]})," "]});return(0,r.jsx)("div",{ref:w,className:"rounded-xl border ".concat(!0===(null===(h=v[j[t].id])||void 0===h?void 0:h.isRunning)?"bg-white":j[t].backdrop,"  flex h-full w-full transform  flex-col items-center justify-center border  shadow-large  transition duration-200 hover:border-blue-500 ").concat(!0===(null===(b=v[j[t].id])||void 0===b?void 0:b.isRunning)?"border-black":"border-white"," cursor-pointer select-none transition-all duration-1000 ease-in-out"),onMouseDown:e=>{m(),console.log("profile/ clicked")},children:!0===(null===(f=v[j[t].id])||void 0===f?void 0:f.isRunning)?k:N})}var h=o(93513),b=o(37039),f=o(11163),x=o(69968),v=o(26281),p=o(95485);const y=(0,x.WidthProvider)(x.Responsive),w=["bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tr from-yellow-900 via-red-600 to-yellow-500"],j=["bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500"],F=["bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-l from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500"];var N=function(){const[e,t]=(0,n.useState)(!1),{formulas:o,setFormulas:i,addFormulaOpen:d,setAddFormulaOpen:u}=(0,l.Z)(),{layout:c,setLayout:g}=(0,l.Z)(),x=(0,f.useRouter)(),{showToast:N}=(0,s.pmc)(),{registerFormulaClick:k,registerSelectedFormulaId:H}=(0,l.Z)(),P=[];Object.values(o).forEach((e=>{const t=(0,r.jsx)("div",{className:"grid-item__title ",children:(0,r.jsx)("div",{className:"h-full w-full",children:(0,r.jsx)(m,{formulaId:e.id,onClick:()=>{k(e.id)},onClickEdit:()=>{H(e.id),x.push("/lab")}})})},e.id);P.push(t)}));const{draggable:_}=(0,l.Z)(),[E,T]=(0,n.useState)("New Formula"),[C,O]=(0,n.useState)(a.HF.Espresso),{t:M}=(0,b.$G)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(p.default,{children:[(0,r.jsx)("div",{className:"dark:bg-gray h-[80vh]",children:(0,r.jsx)(y,{compactType:null,className:"layout relative",layouts:c,isDraggable:_,isResizable:_,useCSSTransforms:!1,draggableHandle:".drag-handle",breakpoints:{lg:1280,md:992,sm:767,xs:430,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},onLayoutChange:(o,r)=>{e?g(r):t(!0)},onDragStart:()=>{console.log("OnDragStart")},children:P})}),d&&(0,r.jsx)(s.u_l,{title:M("Add Formula"),onClose:()=>u(!1),primaryAction:{label:"OK",onPress:()=>{u(!1),function(){const e=(0,v.Vj)();g((0,h.Uy)(c,(t=>{var o,r,a;null===(o=t.md)||void 0===o||o.push({i:e,x:0,y:0,w:1,h:1}),null===(r=t.xs)||void 0===r||r.push({i:e,x:0,y:0,w:1,h:1}),null===(a=t.sm)||void 0===a||a.push({i:e,x:0,y:0,w:1,h:1})}))),i((0,h.Uy)(o,(t=>{let o="bg-white";C==a.HF.Espresso?o=w[Math.floor(Math.random()*w.length)]:C==a.HF.PourOver?o=F[Math.floor(Math.random()*F.length)]:C==a.HF.Teapresso&&(o=j[Math.floor(Math.random()*j.length)]);const r={id:e,title:E,text:"New Formula",color:"gray",backdrop:o,formulaType:C,steps:[]};t[e]=r,console.log("fml/ create new",r)}))),console.log("addFormula",{layout:c,formulas:o})}()}},secondaryAction:{label:M("Cancel"),onPress:()=>u(!1)},children:(0,r.jsxs)(s.Kqy,{space:4,children:[(0,r.jsx)(s.nvn,{label:M("Formula Name"),value:E,onChange:e=>{T(e)}}),(0,r.jsxs)(s.r5R,{space:4,columns:3,children:[(0,r.jsx)(s.zxk,{hierarchy:"primary",kind:C==a.HF.Espresso?"solid":"outline",label:M("Espresso"),onPress:()=>{O(a.HF.Espresso)}}),(0,r.jsx)(s.zxk,{hierarchy:"primary",kind:C==a.HF.Teapresso?"solid":"outline",label:M("Teapresso"),onPress:()=>{O(a.HF.Teapresso)}}),(0,r.jsx)(s.zxk,{hierarchy:"primary",kind:C==a.HF.PourOver?"solid":"outline",label:M("Pour Over"),onPress:()=>{O(a.HF.PourOver)}})]})]})})]})})}}},function(e){e.O(0,[838,396,660,817,509,127,970,415,281,611,485,774,888,179],(function(){return t=48312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=index-74d9b424f43c9e5a.js.map