(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{7503:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lab",function(){return s(7178)}])},2290:function(e,t,s){"use strict";var r=s(7294),a=s(1020);t.Z=()=>(0,r.useContext)(a.Tp)},9186:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(512),a=s(8388);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},7178:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Y}});var r=s(5893),a=s(1163),n=s(7294),l=s(6670),i=s(6281),o=s(8979),c=s(5948),d=s(6839),x=s(7094),u=s(80),p=s(2780),h=s(9186);let g=n.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:n=!0,...l}=e;return(0,r.jsx)(p.f,{ref:t,decorative:n,orientation:a,className:(0,h.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...l})});g.displayName=p.f.displayName;var m=s(7136),f=s(2091),j=s(1432);let v=j.fC,A=j.xz,y=n.forwardRef((e,t)=>{let{className:s,align:a="center",sideOffset:n=4,...l}=e;return(0,r.jsx)(j.h_,{children:(0,r.jsx)(j.VY,{ref:t,align:a,sideOffset:n,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});y.displayName=j.VY.displayName;var w=s(3513),N=s(2290),C=s(4158);let k=[{title:"can skip",text:"Grinder will skip this step if portafilter is not in position",value:!0},{title:"must wait",text:"Grinder will wait until the portafilter is in position",value:!1}],T=[{title:"pressure sensor",text:"Use the external pressure sensor to feedback",value:"Pressure"},{title:"flowrate profiler",text:"Use the flowrate to feedback",value:"Flowrate"}],E=(e,t)=>{let s=[];return e.map((e,a)=>{s.push((0,r.jsx)(P,{title:e.title,text:e.text,onClick:()=>{t(e.title)}},a))}),(0,r.jsx)("div",{className:"grid gap-4 ",children:(0,r.jsx)("div",{className:"grid gap-2",children:s})})},S=e=>{let{text:t}=e;return t.split(" ").map((e,t)=>(0,r.jsx)("h1",{className:"text-xl",children:e},t))},P=e=>{let{title:t,text:s,onClick:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:a,children:[(0,r.jsx)("h1",{className:"text-xl",children:t}),(0,r.jsx)("h3",{className:"text-sm text-gray-500",children:s})]})},F=e=>{let{value:t,onChange:s}=e,[a,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{l(!1)},[t]);let i=e=>{s(e),d.g8.Profile};return(0,r.jsxs)(v,{onOpenChange:e=>{l(!1!=e)},open:a,children:[(0,r.jsx)(A,{children:(0,r.jsx)("h1",{className:"text-orange-900 text-xl underline decoration-pink-500 font-bold",onClick:()=>{l(!0)},children:t||"Action"})}),(0,r.jsx)(y,{className:"w-96 rounded-xl border",children:(0,r.jsx)("div",{className:"grid gap-4 ",children:(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(P,{title:"Grind",text:"Start by having perfect dose of coffee",onClick:()=>{i(d.g8.Grind)}}),(0,r.jsx)(g,{}),(0,r.jsx)(P,{title:"Extract",text:"Let the pump work its magic",onClick:()=>{i(d.g8.Extract)}}),(0,r.jsx)(g,{}),(0,r.jsx)(P,{title:"Rest",text:"Patience is key for a cup of perfection",onClick:()=>{i(d.g8.Rest)}}),(0,r.jsx)(g,{}),(0,r.jsx)(P,{title:"Profiling",text:"Fine tuning the pressure to enhance the flavour",onClick:()=>{i(d.g8.Profile)}})]})})})]})},U=e=>{let{value:t,onChange:s}=e,[a,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{l(!1)},[t]),(0,C.q)(()=>{s(!1)}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(v,{onOpenChange:e=>{l(!1!=e)},open:a,children:[(0,r.jsx)(A,{children:(0,r.jsx)("h1",{className:"  text-xl text-blue-800 font-bold",onClick:()=>{l(!0)},children:t?"can skip":"must wait"})}),(0,r.jsx)(y,{className:"w-96 rounded-xl border",children:E(k,e=>{"can skip"==e?s(!0):s(!1)})})]})})},D=e=>{let{value:t,onChange:s}=e,[a,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{l(!1)},[t]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(v,{onOpenChange:e=>{l(!1!=e)},open:a,children:[(0,r.jsx)(A,{children:(0,r.jsx)("h1",{className:" font-bold text-xl text-blue-800",onClick:()=>{l(!0)},children:t||"[select type]"})}),(0,r.jsx)(y,{className:"w-96 rounded-xl border",children:E(T,e=>{e==d.jk.Pressure?s(d.jk.Pressure):s(d.jk.Flowrate)})})]})})},O=(e,t)=>{if(void 0===e)return;let s=[],r=0;e.forEach(e=>{r+=e.duration});var a=0;for(let r of e){for(var n=0;n<r.duration;n+=.1){var l=a+(r.value-a)*(n/r.duration);l=Math.round(10*l)/10,t==d.jk.Pressure?s.push({pressure:l,max:10,min:0}):s.push({flowrate:l,max:50,min:0})}a=r.value,r.duration}return s};function R(e){let{value:t,onChange:s}=e,[a,l]=(0,n.useState)(!1);return(0,C.q)(()=>{console.log("Effect Once"),s(22)}),(0,r.jsxs)(v,{onOpenChange:e=>{!1==e&&l(!1)},open:a,children:[(0,r.jsx)(A,{children:(0,r.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{l(!0)},children:(0,r.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[t," miligrams"]})})}),(0,r.jsxs)(y,{className:"w-96 rounded-xl border min-w-96",children:[(0,r.jsx)(x.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{l(!1)}}),(0,r.jsx)(m.RWL,{value:t,onChange:s,label:"Weight",type:"single",name:"value",minValue:0,maxValue:50,step:.1})]})]})}let z=e=>{let{value:t,onChange:s}=e,[a,l]=(0,n.useState)(!1);return(0,C.q)(()=>{s(100)}),(0,r.jsxs)(v,{onOpenChange:e=>{!1==e&&l(!1)},open:a,children:[(0,r.jsx)(A,{children:(0,r.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{l(!0)},children:(0,r.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[t," %"]})})}),(0,r.jsxs)(y,{className:"w-96 rounded-xl border min-w-96",children:[(0,r.jsx)(x.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{l(!1)}}),(0,r.jsx)(m.RWL,{value:t,onChange:s,label:"Weight",type:"single",name:"value",minValue:0,maxValue:100,step:5})]})]})},_=e=>{let{value:t,onChange:s,valveState:a,toggleChecked:l}=e,[i,o]=(0,n.useState)(!1);return(0,C.q)(()=>{s(10),l(!1)}),(0,r.jsxs)(v,{onOpenChange:e=>{o(!1!=e)},open:i,children:[(0,r.jsx)(A,{children:(0,r.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{o(!0)},children:(0,r.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[t," ",t<=1?"second":"seconds"]})})}),(0,r.jsxs)(y,{className:"w-80 rounded-xl border  space-y-8",children:[(0,r.jsx)(x.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{o(!1)}}),(0,r.jsx)(m.RWL,{value:t,onChange:s,label:"Resting Time",type:"single",name:"value",minValue:0,maxValue:60,step:1}),(0,r.jsx)("div",{className:"select-none",children:(0,r.jsx)(m.xuv,{padding:24,background:a?"softOrange":"backgroundPrimary",onClick:()=>{l(!a)},cursor:{disabled:"notAllowed"},children:(0,r.jsxs)(m.oeA,{space:16,children:[(0,r.jsx)(m.sgG,{width:"content",children:(0,r.jsx)(m.XZJ,{"aria-label":"Toggle card selection",value:a,onChange:()=>{l(a)}})}),(0,r.jsxs)(m.Kqy,{space:8,children:[(0,r.jsx)(m.Dxz,{size:"medium",children:"Keep valve open"}),(0,r.jsx)(m.uTp,{size:"medium",children:"Keeping group valve open while resting will reduce the pressure at group"})]})]})})})]})]})},I=e=>{let{value:t,onChange:s}=e,[a,l]=(0,n.useState)(!1);return(0,C.q)(()=>{s(10)}),(0,r.jsxs)(v,{onOpenChange:e=>{l(!1!=e)},open:a,children:[(0,r.jsx)(A,{children:(0,r.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{l(!0)},children:(0,r.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[t," ",t<=1?"second":"seconds"]})})}),(0,r.jsxs)(y,{className:"w-80 rounded-xl border  space-y-8",children:[(0,r.jsx)(x.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{l(!1)}}),(0,r.jsx)(m.RWL,{value:t,onChange:s,label:"Time",type:"single",name:"value",minValue:0,maxValue:60,step:1})]})]})},M=e=>{let{value:t,onChange:s}=e;console.log("action/ recreate");let[a,l]=(0,n.useState)(!1),{grinderSettings:i}=(0,N.Z)();return(0,C.q)(()=>{s("[select grinder]")}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(v,{onOpenChange:e=>{console.log("close",e),l(!1!=e)},open:a,children:[(0,r.jsx)(A,{children:(0,r.jsx)("h1",{className:"font-bold text-xl "+(t?"text-blue-800":"text-red-500"),onClick:()=>{l(!0)},children:t||"[select grinder]"})}),(0,r.jsx)(y,{className:"w-96 rounded-xl border",children:(0,r.jsx)("div",{className:"grid gap-4 ",children:(0,r.jsx)("div",{className:"grid gap-2",children:(i||[]).map((e,t)=>(0,r.jsxs)(r.Fragment,{children:[!!t&&(0,r.jsx)(g,{}),(0,r.jsx)(P,{title:e.name,text:"over "+e.connectionType+" with id "+e.connectionId,onClick:()=>{s(e.name)}})]}))})})})]})})};function K(e){let{onDelete:t,index:s}=e,{steps:a,setSteps:l}=(0,N.Z)(),[i,o]=(0,n.useState)("can skip");return(0,r.jsxs)("div",{className:"flex flex-col  h-fit rounded-xl p-4 max-w-[calc(90vw)] w-96  border hover:border-blue-500  bg-white drop-shadow-xl hover:scale-105 transition-transform duration-200",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-2 cursor-pointer",onClick:()=>t(),children:(0,r.jsx)(u.maG,{className:"text-gray-300"})}),(0,r.jsxs)("div",{className:"inline-flex flex-wrap gap-2 items-center text-wrap max-w-96 space-x-1",children:[(0,r.jsx)(F,{value:a[s].action.actionType,onChange:e=>{l((0,w.Uy)(a,t=>{let r=t[s].action;r.actionType=e;let a=t[s].target;e==d.g8.Grind?a.targetType=d.YK.Weight:e==d.g8.Extract?a.targetType=d.YK.Weight:e==d.g8.Rest?a.targetType=d.YK.Time:e==d.g8.Profile?a.targetType=d.YK.Weight:e==d.g8.PourOver&&(a.targetType=d.YK.Weight),t[s].action=r,t[s].target=a}))}}),"Grind"===a[s].action.actionType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{value:a[s].target.value,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].target.targetType=d.YK.Weight,t[s].target.value=e}))}}),(0,r.jsx)(S,{text:"of"}),(0,r.jsx)(M,{value:a[s].action.ingredient,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].action.ingredient=e}))}}),(0,r.jsx)(S,{text:"bean, grinder"}),(0,r.jsx)(U,{value:a[s].action.canSkip,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].action.canSkip=e,t[s].action.actionType=d.g8.Grind}))}}),!0===a[s].action.canSkip?(0,r.jsx)(S,{text:"this step is portafilter is absent"}):(0,r.jsx)(S,{text:"until portafilter is present"})]}),"Extract"===a[s].action.actionType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{text:"a shot of"}),(0,r.jsx)(R,{value:a[s].target.value,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].target.targetType=d.YK.Weight,t[s].target.value=e}))}}),(0,r.jsx)(S,{text:"with pump power"}),(0,r.jsx)(z,{value:a[s].action.power,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].action.actionType=d.g8.Extract,t[s].action.power=e}))}})]}),a[s].action.actionType===d.g8.PourOver&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{value:a[s].target.value,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].target.targetType=d.YK.Weight,t[s].target.value=e}))}}),(0,r.jsx)(S,{text:"in"}),(0,r.jsx)(I,{value:a[s].action.duration,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].action.duration=e}))}})]}),"Rest"===a[s].action.actionType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{text:"for"}),(0,r.jsx)(_,{value:a[s].target.value,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].target.targetType=d.YK.Time,t[s].target.value=e}))},valveState:a[s].action.valveState,toggleChecked:e=>{l((0,w.Uy)(a,t=>{t[s].target.targetType=d.YK.Time,t[s].action.valveState=e}))}}),a[s].action.valveState&&(0,r.jsx)(S,{text:"but keep valve open"})]}),"Profile"===a[s].action.actionType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{text:"to extract"}),(0,r.jsx)(R,{value:a[s].target.value,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].target.targetType=d.YK.Weight,t[s].target.value=e}))}}),(0,r.jsx)(S,{text:"of espresso using"}),(0,r.jsx)(D,{value:a[s].action.profilingType,onChange:e=>{l((0,w.Uy)(a,t=>{t[s].action.actionType=d.g8.Profile,t[s].action.profilingType=e}))}}),(0,r.jsx)(W,{index:s,segments:a[s].action.segments,sensor:a[s].action.profilingType}),(0,r.jsx)(B,{segments:a[s].action.segments,sensor:a[s].action.profilingType})]})]})]})}let W=e=>{let{segments:t,sensor:s,index:a}=e,{steps:n,setSteps:l}=(0,N.Z)();(0,C.q)(()=>{l((0,w.Uy)(n,e=>{e[a].action.actionType="Profile",e[a].action.segments=e[a].action.segments||[],0==e[a].action.segments.length&&(e[a].action.segments=[{duration:10,value:3}])})),console.log("segments/ initliazed as empty",n[a])});let i=(t||[]).map((e,i)=>(0,r.jsxs)("div",{className:"flex flex-rol flex-wrap",children:[0==i?(0,r.jsx)(S,{text:"First, reach"}):(0,r.jsx)(S,{text:"then"}),(0,r.jsx)(V,{segments:t,sensor:s,setValue:e=>{l((0,w.Uy)(n,t=>{t[a].action.segments[i].value=e}))},idx:i}),0==i?(0,r.jsx)(S,{text:"within"}):(0,r.jsx)(S,{text:"in"}),(0,r.jsx)(I,{value:t[i].duration,onChange:e=>{l((0,w.Uy)(n,t=>{t[a].action.segments[i].duration=e}))}}),(0,r.jsx)("h1",{className:"text-xl",children:i===t.length-1?".":","})]},i));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{}),(0,r.jsx)("ul",{children:i}),(0,r.jsxs)("div",{className:"flex flex-row space-x-1 p-2  h-6 w-fit rounded-md bg-blue-100 items-center hover:scale-105 transition-transform duration-200 cursor-pointer",children:[(0,r.jsx)(f.wEH,{color:"#1180EF",size:16,onClick:()=>{console.log("add segment",{segments:t}),l((0,w.Uy)(n,e=>{e[a].action.segments.push({duration:Math.floor(30*Math.random()),value:+(8*Math.random()+2).toFixed(1)})}))}}),(0,r.jsx)(f.iFH,{color:"#1180EF",size:16,onClick:()=>{console.log("remove segment",{segments:t}),void 0!==n[a].action.segments&&(n[a].action.segments.length<2||l((0,w.Uy)(n,e=>(e[a].action.segments.pop(),e))))}})]})]})},B=e=>{let{segments:t,sensor:s}=e,[a,l]=(0,n.useState)([]);return(0,n.useEffect)(()=>{l(O(t,s))},[t,s]),(0,r.jsx)("div",{className:"w-full -translate-x-10 hover:scale-120 transition-transform duration-200",children:(0,r.jsx)(m.wWH,{height:300,dataKey:"time",categories:[s==d.jk.Pressure?"pressure":"flowrate","max","min"],hideLegend:!1,hideXAxis:!1,hideYAxis:!1,data:a,disableAnimation:!0})})},V=e=>{let{segments:t,setValue:s,sensor:a,idx:l}=e,[i,o]=(0,n.useState)(!1),c=a==d.jk.Pressure?"bar":"mg/s";return(0,r.jsxs)(v,{onOpenChange:e=>{console.log("close",e),!1==e&&o(!1)},open:i,children:[(0,r.jsx)(A,{children:(0,r.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{o(!0)},children:(0,r.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[t[l].value," ",c]})})}),(0,r.jsxs)(y,{className:"w-96 rounded-xl border min-w-96",children:[(0,r.jsx)(x.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{o(!1)}}),(0,r.jsx)(m.RWL,{value:t[l].value,onChange:e=>{s(e)},label:a===d.jk.Pressure?"Pressure":"Flowrate",type:"single",name:"value",minValue:0,maxValue:a==d.jk.Pressure?10:100,step:.1})]})]})};var Y=()=>{var e;let t=(0,a.useRouter)();t.query.slug;let[s,x]=(0,n.useState)(-1),[u,p]=(0,n.useState)(-1),[h,j]=(0,n.useState)(!1),[v,A]=(0,n.useState)(!1),[y,C]=(0,n.useState)(!0),{selectedFormulaId:k,registerSelectedFormulaId:T,setFormulas:E,formulas:S,setSelectedPage:P,steps:F,setSteps:U,registerFormulaClick:D}=(0,N.Z)(),[O,R]=(0,n.useState)(!1);return(0,n.useEffect)(function(){R(!0)},[]),(0,n.useEffect)(()=>{console.log("lab/ re-render",k)},[k]),(0,r.jsxs)(o.default,{children:[h&&(0,r.jsxs)(m.u_l,{size:"large",autoFocus:!1,title:"Assign to Button",onClose:()=>j(!1),primaryAction:{label:"Download",onPress:()=>{C(!0),setTimeout(()=>{j(!1)},3e3)}},secondaryAction:{label:"Cancel",onPress:()=>j(!1)},children:[(0,r.jsx)(m.uTp,{size:"medium",children:"This process will save the formula to a physical button on your cofee machine so you don't always need a mobile device connected"}),(0,r.jsxs)("div",{className:"w-full h-32 flex flex-col space-y-4 p-4",children:[(0,r.jsx)("div",{className:"w-full h-fit flex flex-row space-x-4 justify-between",children:[1,2,3].map((e,t)=>(0,r.jsx)(m.zxk,{label:"Group ".concat(e),hierarchy:"primary",kind:t===s?"solid":"outline",onPress:()=>x(t)},t))}),(0,r.jsx)("div",{className:"w-full h-fit flex flex-row space-x-4 justify-between",children:[1,2,3,4].map((e,t)=>(0,r.jsx)(m.zxk,{label:"Button ".concat(e),hierarchy:"primary",kind:t===u?"solid":"outline",onPress:()=>p(t)},t))})]})]}),v&&(0,r.jsx)(m.u_l,{title:"Share",onClose:()=>A(!1),primaryAction:{label:"OK",onPress:()=>A(!1)},secondaryAction:{label:"Cancel",onPress:()=>A(!1)},children:(0,r.jsx)(m.uTp,{size:"medium",children:"Content"})}),(0,r.jsxs)("div",{className:"flex flex-col bg-gray-100 items-center space-y-4 p-4",children:[(0,r.jsxs)("div",{className:" h-fit bg-gray-300 rounded-xl max-w-[calc(90vw)] w-96 p-4 flex flex-col space-y-4 shadow-xl border",children:[(0,r.jsx)(m.nvn,{value:null===(e=S[k])||void 0===e?void 0:e.title,onChange:e=>{E((0,w.Uy)(S,t=>{console.log("Formulas",S,k),t[k].title=e}))},label:"Formula",placeholder:"Untitled formula"}),(0,r.jsx)("div",{className:"flex flex-row w-full h-16 space-x-4 justify-between"}),(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center space-x-1 text-white",children:[(0,r.jsxs)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-2/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-blue-400 to-emerald-400 text-white select-none",onClick:()=>{D(k)},children:[(0,r.jsx)(f.gmG,{}),(0,r.jsx)("h1",{children:"Play"})]}),(0,r.jsx)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-1/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-purple-800 via-violet-900 to-purple-800",onClick:()=>{console.log("download"),j(!0)},children:(0,r.jsx)(f.aBF,{})}),(0,r.jsx)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-1/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-blue-500 to-blue-600",onClick:()=>{A(!0)},children:(0,r.jsx)(f.PPi,{})}),(0,r.jsx)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-1/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-red-500 to-red-800",onClick:()=>{console.log("delete"),P("Formula"),T(null),E((0,w.Uy)(S,e=>{delete S[k]})),t.push("/")},children:(0,r.jsx)(f.zYX,{})})]})]}),(0,r.jsx)(g,{}),(0,r.jsxs)("div",{className:" flex flex-col py-3 justify-center items-center mix-w-80 ",children:[(0,r.jsx)(c.Z5,{onDragEnd:function(e,t){e.destination&&U((0,w.Uy)(F,t=>{let[s]=t.splice(e.source.index,1);return t.splice(e.destination.index,0,s),t}))},onBeforeDragStart:()=>{console.log("onBeforeDragStart")},onDragStart:()=>{console.log("onDragStart")},onDragUpdate:()=>{console.log("onDragUpdate")},children:(0,r.jsx)("div",{className:"flex flex-row w-full",children:(0,r.jsx)(c.bK,{droppableId:"ROOT",children:e=>(0,r.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"flex flex-col w-full justify-between mx-auto items-center space-y-4",children:[null==F?void 0:F.map((e,t)=>(console.log("render",{item:e,idx:t}),O&&(0,r.jsx)(c._l,{draggableId:null==e?void 0:e.id,index:t,children:s=>(0,r.jsx)("div",{className:"",...s.dragHandleProps,...s.draggableProps,ref:s.innerRef,children:(0,r.jsx)(K,{onDelete:()=>{var t;return t=null==e?void 0:e.id,void U((0,w.Uy)(F,e=>e.filter(function(e){return(null==e?void 0:e.id)!==t})))},index:t})})},null==e?void 0:e.id))),e.placeholder]})})})}),(0,r.jsxs)("button",{className:"flex flex-row space-x-4 justify-center items-center rounded-xl border  cursor-pointer w-80 h-16 my-4 bg-blue-100",onClick:function(){U((0,w.Uy)(F,e=>{e.push({id:(0,i.Vj)(),action:{actionType:d.g8.Rest,valveState:!1},target:{targetType:d.YK.Time,value:10}})}))},children:[(0,r.jsx)(l.OzW,{color:"#1180EF",size:30}),(0,r.jsx)("p",{className:"text-[#1180EF] font-bold text-lg",children:"Add steps"})]})]})]})]})}},8979:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var r=s(5893),a=s(7136),n=s(1121),l=s(7094),i=s(4554),o=s(2290),c=s(7294),d=s(1163),x=()=>{let{connectButtonDisplay:e}=(0,o.Z)(),{selectedPage:t,setSelectedPage:s}=(0,o.Z)(),i=(0,d.useRouter)();return(0,r.jsx)("div",{className:"flex justify-center w-full fixed bottom-0 z-50",children:(0,r.jsx)(a.eBu,{space:4,children:(0,r.jsx)("div",{className:"flex justify-between  flex-row",children:"/lab"==i.pathname?(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"cursor-pointer",onClick:()=>{b,"/lab"==i.pathname&&i.push("/")},children:(0,r.jsx)("h1",{className:"text-xl font-bold dark:text-white",children:"/lab"==i.pathname?"â—€ Back":t})})}):(0,r.jsxs)("div",{children:[(0,r.jsx)(a.zxk,{hierarchy:"Formula"===t?"primary":"secondary",kind:"transparent",label:"Formula",icon:()=>(0,r.jsx)(n.h1P,{}),onPress:()=>{s("Formula"),i.push("/")}}),(0,r.jsx)(a.zxk,{hierarchy:"Setting"===t?"primary":"secondary",kind:"transparent",label:"Settings",icon:()=>(0,r.jsx)(l.Fnt,{}),onPress:()=>{s("Setting"),i.push("/setting")}})]})})})})},u=s(80),p=s(8318),h=s(5675),g=s.n(h),m={src:"/_next/static/media/vietcafe.901768c4.jpeg",height:2048,width:2048,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABwEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAK6Jf//EABoQAAICAwAAAAAAAAAAAAAAAAECEhQAMtH/2gAIAQEAAT8AFmwEZXhLYJIHmf/EABkRAQACAwAAAAAAAAAAAAAAAAEAMQIRIf/aAAgBAgEBPwDE0WvW5//EABgRAAIDAAAAAAAAAAAAAAAAAAABAiEx/9oACAEDAQE/AJW8P//Z",blurWidth:8,blurHeight:8},f=()=>{let{connectButtonStyle:e,connectButtonText:t,selectedPage:s,draggable:a,setDraggable:n,darkMode:l,setDarkMode:c,language:x,setLanguage:h,connected:f}=(0,o.Z)(),j=(0,d.useRouter)();return(0,r.jsxs)("div",{className:"flex justify-between items-center m-4",children:[(0,r.jsx)("div",{className:"logo rounded-xl dark:bg-white overflow-hidden dark:opacity-50",onClick:()=>{j.push("/")},children:(0,r.jsx)(g(),{src:m,alt:"VietCafe",width:50})}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-evenly h-[48px] space-x-1",children:[(0,r.jsx)("div",{className:"border border-purple-700 p-1 rounded-xl  h-[48px] w-[48px] flex justify-center items-center cursor-pointer ".concat(a?"bg-purple-800":""),onClick:()=>{n(!a)},children:a?(0,r.jsx)(p.Cv_,{className:"text-white"}):(0,r.jsx)(p.gMo,{className:"text-purple-700"})}),(0,r.jsx)("div",{className:"border border-purple-700 p-1 rounded-xl  h-[48px] w-[48px] flex justify-center items-center cursor-pointer ".concat(l?"bg-purple-800":""),onClick:()=>{c(!l)},children:l?(0,r.jsx)(u.Dq,{className:"text-white"}):(0,r.jsx)(u.hjx,{className:"text-purple-700"})}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-center space-x-2 border border-purple-700 w-fit h-[48px] rounded-xl cursor-pointer p-3   ".concat(f?"bg-purple-700":""),onClick:()=>{(0,i.s0)()},children:[f?(0,r.jsx)(u.beQ,{className:"text-white"}):(0,r.jsx)(u.Vdu,{className:"text-purple-700"}),(0,r.jsx)("h1",{className:"".concat(f?"text-white":"text-black"," text-purple-700 select-none"),children:t})]})]})]})},j=s(2078),v=s(5139),A=s(9592),y=s(9186);let w=j.zt,N=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(j.l_,{ref:t,className:(0,y.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a})});N.displayName=j.l_.displayName;let C=(0,v.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),k=c.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)(j.fC,{ref:t,className:(0,y.cn)(C({variant:a}),s),...n})});k.displayName=j.fC.displayName,c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(j.aU,{ref:t,className:(0,y.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a})}).displayName=j.aU.displayName;let T=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(j.x8,{ref:t,className:(0,y.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:(0,r.jsx)(A.Z,{className:"h-4 w-4"})})});T.displayName=j.x8.displayName;let E=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(j.Dx,{ref:t,className:(0,y.cn)("text-sm font-semibold",s),...a})});E.displayName=j.Dx.displayName;let S=c.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(j.dk,{ref:t,className:(0,y.cn)("text-sm opacity-90",s),...a})});S.displayName=j.dk.displayName;let P=0,F=new Map,U=e=>{if(F.has(e))return;let t=setTimeout(()=>{F.delete(e),z({type:"REMOVE_TOAST",toastId:e})},1e6);F.set(e,t)},D=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?U(s):e.toasts.forEach(e=>{U(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},O=[],R={toasts:[]};function z(e){R=D(R,e),O.forEach(e=>{e(R)})}function _(e){let{...t}=e,s=(P=(P+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>z({type:"DISMISS_TOAST",toastId:s});return z({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>z({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function I(){let{toasts:e}=function(){let[e,t]=c.useState(R);return c.useEffect(()=>(O.push(t),()=>{let e=O.indexOf(t);e>-1&&O.splice(e,1)}),[e]),{...e,toast:_,dismiss:e=>z({type:"DISMISS_TOAST",toastId:e})}}();return(0,r.jsxs)(w,{children:[e.map(function(e){let{id:t,title:s,description:a,action:n,...l}=e;return(0,r.jsxs)(k,{...l,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[s&&(0,r.jsx)(E,{children:s}),a&&(0,r.jsx)(S,{children:a})]}),n,(0,r.jsx)(T,{})]},t)}),(0,r.jsx)(N,{})]})}var M=e=>{let{children:t}=e;return(0,r.jsxs)(a.Kqy,{space:4,children:[(0,r.jsx)(f,{}),(0,r.jsx)("div",{className:"mb-[56px]",children:t}),(0,r.jsx)(I,{}),(0,r.jsx)(x,{})]})}}},function(e){e.O(0,[838,660,817,509,365,594,630,415,281,875,774,888,179],function(){return e(e.s=7503)}),_N_E=e.O()}]);