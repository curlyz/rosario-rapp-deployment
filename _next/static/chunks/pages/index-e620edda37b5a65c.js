(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(407)}])},407:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return w}});var t,l,a=o(5893),n=o(1163),s=o(9968),i=o(8979),d=o(5282),u=o(2777),c=o(2290);function g(e){let{formula:r,onClickEdit:o,onClick:t,...l}=e,{draggable:n}=(0,c.Z)();return(0,a.jsxs)("div",{className:"border rounded-xl ".concat(r.backdrop,"  w-full h-full flex flex-col  transition-transform duration-200 hover:border-blue-500  items-center  justify-center shadow-large border border-white cursor-pointer select-none"),onMouseDown:e=>{t(),console.log("profile/ clicked")},children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 flex flex-col  items-center justify-between",children:n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"hover:opacity-50",onMouseDown:e=>{o(),e.preventDefault(),e.stopPropagation()},onTouchStart:e=>{o(),e.preventDefault(),e.stopPropagation()},children:(0,a.jsx)(d.DVr,{size:32,className:"text-white m-1 "})}),(0,a.jsx)("button",{children:(0,a.jsx)(u.uWH,{size:20,className:"text-white m-1 drag-handle"})})]})}),(0,a.jsx)("h1",{className:"truncate text-clip text-balance text-xl text-center select-none text-white",children:r.title})]})}var b=o(7294),h=o(3513),m=o(6281),f=o(9600);o(4554),o(6839),(t=l||(l={})).Espresso="Espresso",t.Teapresso="Teapresso",t.PourOver="PourOver";let x=(0,s.WidthProvider)(s.Responsive),v=["bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tr from-yellow-900 via-red-600 to-yellow-500"],p=["bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500"],y=["bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-l from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500"];var w=()=>{let[e,r]=(0,b.useState)(!1),{formulas:o,setFormulas:t,addFormulaOpen:s,setAddFormulaOpen:d}=(0,c.Z)(),{layout:u,setLayout:w}=(0,c.Z)(),j=(0,n.useRouter)(),{showToast:N}=(0,f.pmc)(),{registerFormulaClick:k,registerSelectedFormulaId:P}=(0,c.Z)(),_=[];Object.values(o).forEach(e=>{let r=(0,a.jsx)("div",{className:"grid-item__title ",children:(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(g,{formula:e,onClick:()=>{k(e.id)},onClickEdit:()=>{P(e.id),j.push("/lab")}},e.id)})},e.id);_.push(r)});let{draggable:E}=(0,c.Z)(),[T,O]=(0,b.useState)("New Formula"),[C,D]=(0,b.useState)(l.Espresso);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(i.default,{children:[(0,a.jsx)("div",{className:"h-[80vh] dark:bg-gray",children:(0,a.jsx)(x,{compactType:null,className:"layout relative",layouts:u,isDraggable:E,isResizable:E,useCSSTransforms:!1,draggableHandle:".drag-handle",breakpoints:{lg:1280,md:992,sm:767,xs:430,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},onLayoutChange:(o,t)=>{if(!e){r(!0);return}w(t)},onDragStart:()=>{console.log("OnDragStart")},children:_})}),s&&(0,a.jsx)(f.u_l,{title:"Add formula",onClose:()=>d(!1),primaryAction:{label:"OK",onPress:()=>{d(!1),function(){let e=(0,m.Vj)();w((0,h.Uy)(u,r=>{var o,t,l;null===(o=r.md)||void 0===o||o.push({i:e,x:0,y:0,w:1,h:1}),null===(t=r.xs)||void 0===t||t.push({i:e,x:0,y:0,w:1,h:1}),null===(l=r.sm)||void 0===l||l.push({i:e,x:0,y:0,w:1,h:1})})),t((0,h.Uy)(o,r=>{let o;C==l.Espresso?o=v[Math.floor(Math.random()*v.length)]:C==l.PourOver?o=y[Math.floor(Math.random()*y.length)]:C==l.Teapresso&&(o=p[Math.floor(Math.random()*p.length)]);let t={id:e,title:T,text:"New Formula",color:"gray",backdrop:o};r[e]=t,console.log("fml/ create new",t)})),console.log("addFormula",{layout:u,formulas:o})}()}},secondaryAction:{label:"Cancel",onPress:()=>d(!1)},children:(0,a.jsxs)(f.Kqy,{space:4,children:[(0,a.jsx)(f.nvn,{label:"Formula Name",value:T,onChange:e=>{O(e)}}),(0,a.jsxs)(f.r5R,{space:4,columns:3,children:[(0,a.jsx)(f.zxk,{hierarchy:"primary",kind:C==l.Espresso?"solid":"outline",label:"Espresso",onPress:()=>{D(l.Espresso)}}),(0,a.jsx)(f.zxk,{hierarchy:"primary",kind:C==l.Teapresso?"solid":"outline",label:"Teapresso",onPress:()=>{D(l.Teapresso)}}),(0,a.jsx)(f.zxk,{hierarchy:"primary",kind:C==l.PourOver?"solid":"outline",label:"Pour over",onPress:()=>{D(l.PourOver)}})]})]})})]})})}}},function(e){e.O(0,[838,396,660,817,509,970,415,281,611,979,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);