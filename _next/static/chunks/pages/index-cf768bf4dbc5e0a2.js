(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(59890)}])},59890:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var o=r(85893),l=r(77797),a=r(65058),n=r(80907),s=r(67294),i=r(2777),d=r(71054),u=r(37094),c=r(30080),g=r(35282),h=r(82729),m=r(4960),b=r(88459),f=r(79825),x=r(63305),v=r(84426),p=r(90512),y=r(98388);function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,y.m6)((0,p.W)(t))}function j(){const e=(0,h._)(["translateX(","px) translateY(","px) translateX(-50%) translateY(-50%)"]);return j=function(){return e},e}function F(e){let{borderRadius:t="1.75rem",children:r,as:l="button",containerClassName:a,borderClassName:n,duration:s,className:i,isRunning:d,...u}=e;return(0,o.jsxs)(l,{className:w("bg-transparent relative text-xl h-full w-full p-[3px] overflow-hidden ",a),style:{borderRadius:t},...u,children:[(0,o.jsx)("div",{className:"absolute inset-0",style:{borderRadius:"calc(".concat(t," * 0.96)")},children:(0,o.jsx)(N,{duration:s,rx:"30%",ry:"30%",children:(0,o.jsx)("div",{className:w("h-20 w-20 opacity-[0.8]",d?"bg-[radial-gradient(var(--sky-500)_40%,transparent_60%)]":"",n)})})}),(0,o.jsx)("div",{className:w("relative bg-slate-900/[0.8] border border-slate-800 backdrop-blur-xl text-white flex items-center justify-center w-full h-full text-sm antialiased",i),style:{borderRadius:"calc(".concat(t," * 0.96)")},children:r})]})}const N=e=>{let{children:t,duration:r=2e3,rx:l,ry:a,...n}=e;const i=(0,s.useRef)(),d=(0,m.c)(0);(0,b.p)((e=>{var t;const o=null===(t=i.current)||void 0===t?void 0:t.getTotalLength();if(o){const t=o/r;d.set(e*t%o)}}));const u=(0,f.H)(d,(e=>{var t;return null===(t=i.current)||void 0===t?void 0:t.getPointAtLength(e).x})),c=(0,f.H)(d,(e=>{var t;return null===(t=i.current)||void 0===t?void 0:t.getPointAtLength(e).y})),g=(0,x.Y)(j(),u,c);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",className:"absolute h-full w-full",width:"100%",height:"100%",...n,children:(0,o.jsx)("rect",{fill:"none",width:"100%",height:"100%",rx:l,ry:a,ref:i})}),(0,o.jsx)(v.E.div,{style:{position:"absolute",top:0,left:0,display:"inline-block",transform:g},children:t})]})};function k(e){let{formulaId:t,onClickEdit:r,onClick:h}=e;var m,b,f,x,v,p;const{draggable:y,progressReport:w,formulaFeedbacks:j,selectedFormulaId:N}=(0,a.Z)(),[k,R]=(0,s.useState)(0),H=(0,s.useRef)(null),{formulas:_,setFormulas:P}=(0,a.Z)();(0,s.useEffect)((()=>{H.current&&R(H.current.clientHeight)}));const[T,E]=(0,s.useState)(!1),C=(0,s.useRef)();(0,s.useEffect)((()=>{C&&(clearTimeout(C.current),C.current=setTimeout((()=>{E(!1)}),2e3),E(!0))}),[j[N]]);const O=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"absolute right-0 top-0 flex flex-col items-center justify-between",children:y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"hover:opacity-50",onMouseDown:e=>{r(),e.preventDefault(),e.stopPropagation()},onTouchStart:e=>{r(),e.preventDefault(),e.stopPropagation()},children:(0,o.jsx)(g.DVr,{size:32,className:"m-1 text-white "})}),(0,o.jsx)("button",{children:(0,o.jsx)(i.uWH,{size:20,className:"drag-handle m-1 text-white"})})]}):(0,o.jsxs)("div",{className:"m-1 opacity-20",children:[_[t].formulaType===l.HF.Espresso&&(0,o.jsx)(d.q_H,{size:32,className:"m-1 text-white"}),_[t].formulaType===l.HF.Teapresso&&(0,o.jsx)(u.QFv,{size:32,className:"m-1 text-white"}),_[t].formulaType===l.HF.PourOver&&(0,o.jsx)(c.e0F,{size:32,className:"m-1 text-white"})]})}),(0,o.jsx)("h1",{className:"select-none truncate text-clip text-balance text-center text-xl text-white",children:_[t].title})]}),A=(0,o.jsxs)("div",{className:"first-letter absolute bottom-0  left-0 h-full w-full",children:[(0,o.jsx)(n.wWH,{height:k,dataKey:"name",categories:["flowrate"],hideLegend:!0,hideXAxis:!0,hideYAxis:!0,data:[...Array.from({length:10},((e,t)=>({name:"Point ".concat(t+1),flowrate:Math.floor(100*Math.random())})))]})," "]});"border ".concat(!0===(null===(m=w[_[t].id])||void 0===m?void 0:m.isRunning)?"bg-white":_[t].backdrop,"  flex h-full w-full transform  flex-col items-center justify-center border  shadow-large  transition duration-200 hover:border-blue-500 ").concat(!0===(null===(b=w[_[t].id])||void 0===b?void 0:b.isRunning)?"border-black":"border-white"," cursor-pointer select-none transition-all duration-1000 ease-in-out"),null===(f=w[_[t].id])||void 0===f||f.isRunning;return(0,o.jsx)(F,{borderRadius:"16px",isRunning:T,ref:H,className:"rounded-sm border ".concat(!0===(null===(x=w[_[t].id])||void 0===x?void 0:x.isRunning)?"bg-white":_[t].backdrop,"  flex h-full w-full transform  flex-col items-center justify-center border  shadow-large  transition duration-200 hover:border-blue-500 ").concat(!0===(null===(v=w[_[t].id])||void 0===v?void 0:v.isRunning)?"border-black":"border-white"," cursor-pointer select-none transition-all duration-1000 ease-in-out"),onMouseDown:e=>{h(),console.log("profile/ clicked")},children:!0===(null===(p=w[_[t].id])||void 0===p?void 0:p.isRunning)?A:O})}var R=r(93513),H=r(37039),_=r(11163),P=r(69968),T=r(26281),E=r(95485);const C=(0,P.WidthProvider)(P.Responsive),O=["bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-br from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-bl from-yellow-900 via-red-600 to-yellow-500","bg-gradient-to-tr from-yellow-900 via-red-600 to-yellow-500"],A=["bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-b from-green-900 via-green-600 to-teal-500","bg-gradient-to-r from-green-900 via-green-600 to-teal-500"],S=["bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-b from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-l from-blue-900 via-blue-600 to-cyan-500","bg-gradient-to-t from-blue-900 via-blue-600 to-cyan-500"];var M=function(){const[e,t]=(0,s.useState)(!1),{formulas:r,setFormulas:i,addFormulaOpen:d,setAddFormulaOpen:u}=(0,a.Z)(),{layout:c,setLayout:g}=(0,a.Z)(),h=(0,_.useRouter)(),{showToast:m}=(0,n.pmc)(),{registerFormulaClick:b,registerSelectedFormulaId:f}=(0,a.Z)(),x=[];Object.values(r).forEach((e=>{const t=(0,o.jsx)("div",{className:"grid-item__title ",children:(0,o.jsx)("div",{className:"h-full w-full",children:(0,o.jsx)(k,{formulaId:e.id,onClick:()=>{b(e.id)},onClickEdit:()=>{f(e.id),h.push("/lab")}})})},e.id);x.push(t)}));const{draggable:v}=(0,a.Z)(),[p,y]=(0,s.useState)("New Formula"),[w,j]=(0,s.useState)(l.HF.Espresso),{t:F}=(0,H.$G)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(E.default,{children:[(0,o.jsx)("div",{className:"dark:bg-gray h-[80vh]",children:(0,o.jsx)(C,{compactType:null,className:"layout relative",layouts:c,isDraggable:v,isResizable:v,useCSSTransforms:!1,draggableHandle:".drag-handle",breakpoints:{lg:1280,md:992,sm:767,xs:430,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},onLayoutChange:(r,o)=>{e?g(o):t(!0)},onDragStart:()=>{console.log("OnDragStart")},children:x})}),d&&(0,o.jsx)(n.u_l,{title:F("Add Formula"),onClose:()=>u(!1),primaryAction:{label:"OK",onPress:()=>{u(!1),function(){const e=(0,T.Vj)();g((0,R.Uy)(c,(t=>{var r,o,l;null===(r=t.md)||void 0===r||r.push({i:e,x:0,y:0,w:1,h:1}),null===(o=t.xs)||void 0===o||o.push({i:e,x:0,y:0,w:1,h:1}),null===(l=t.sm)||void 0===l||l.push({i:e,x:0,y:0,w:1,h:1})}))),i((0,R.Uy)(r,(t=>{let r="bg-white";w==l.HF.Espresso?r=O[Math.floor(Math.random()*O.length)]:w==l.HF.PourOver?r=S[Math.floor(Math.random()*S.length)]:w==l.HF.Teapresso&&(r=A[Math.floor(Math.random()*A.length)]);const o={id:e,title:p,text:"New Formula",color:"gray",backdrop:r,formulaType:w,steps:[]};t[e]=o,console.log("fml/ create new",o)}))),console.log("addFormula",{layout:c,formulas:r})}()}},secondaryAction:{label:F("Cancel"),onPress:()=>u(!1)},children:(0,o.jsxs)(n.Kqy,{space:4,children:[(0,o.jsx)(n.nvn,{label:F("Formula Name"),value:p,onChange:e=>{y(e)}}),(0,o.jsxs)(n.r5R,{space:4,columns:3,children:[(0,o.jsx)(n.zxk,{hierarchy:"primary",kind:w==l.HF.Espresso?"solid":"outline",label:F("Espresso"),onPress:()=>{j(l.HF.Espresso)}}),(0,o.jsx)(n.zxk,{hierarchy:"primary",kind:w==l.HF.Teapresso?"solid":"outline",label:F("Teapresso"),onPress:()=>{j(l.HF.Teapresso)}}),(0,o.jsx)(n.zxk,{hierarchy:"primary",kind:w==l.HF.PourOver?"solid":"outline",label:F("Pour Over"),onPress:()=>{j(l.HF.PourOver)}})]})]})})]})})}}},function(e){e.O(0,[838,396,660,817,509,127,970,415,426,281,100,485,774,888,179],(function(){return t=48312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=index-cf768bf4dbc5e0a2.js.map