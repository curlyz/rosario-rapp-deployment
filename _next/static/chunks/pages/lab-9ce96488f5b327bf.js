(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{7503:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lab",function(){return s(7183)}])},7183:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return L}});var n=s(5893),r=s(6839),l=s(2290),i=s(3513),o=s(7294),a=s(80),c=s(2780),d=s(9186);let x=o.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:l=!0,...i}=e;return(0,n.jsx)(c.f,{ref:t,decorative:l,orientation:r,className:(0,d.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...i})});x.displayName=c.f.displayName;var u=s(9600),p=s(6670),h=s(2091),m=s(6204),g=s(1054),j=s(8318),f=s(5341),y=s(9151);let b=e=>{let{index:t}=e,[s,a]=(0,o.useState)(!1),{formulas:c,setFormulas:d,selectedFormulaId:x}=(0,l.Z)();(0,o.useEffect)(()=>{a(!1)},[c]);let b=e=>{d((0,i.Uy)(c,s=>{let n=s[x].steps[t].action;n.actionType=e;let l=s[x].steps[t].target;e==r.g8.Grind?l.targetType=r.YK.Weight:e==r.g8.Extract?l.targetType=r.YK.Weight:e==r.g8.Rest?l.targetType=r.YK.Time:e==r.g8.Profile?(l.targetType=r.YK.Weight,n.segments=n.segments||[],n.profilingType=n.profilingType||r.jk.Flowrate):e==r.g8.PourOver&&(l.targetType=r.YK.Weight),s[x].steps[t].action=n,s[x].steps[t].target=l}))},[w,v]=(0,o.useState)(c[x].steps[t].action.actionType),k=c[x].steps[t];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-orange-900 text-xl underline decoration-pink-500 font-bold",onClick:()=>{a(!0)},children:k.action.actionType||"Action"}),s&&(0,n.jsx)(u.u_l,{size:"small",title:"Select an action",onClose:()=>a(!1),primaryAction:{label:"OK",onPress:()=>{a(!1),b(w)}},secondaryAction:{label:"Cancel",onPress:()=>a(!1)},children:(0,n.jsxs)(u.r5R,{space:4,columns:3,children:[(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:w==r.g8.Grind?"solid":"outline",label:"Grind",onPress:()=>{v(r.g8.Grind)},icon:()=>(0,n.jsx)(g.nXt,{})}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:w==r.g8.Extract?"solid":"outline",label:"Extract",onPress:()=>{v(r.g8.Extract)},icon:()=>(0,n.jsx)(j.bYu,{})}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:w==r.g8.Rest?"solid":"outline",label:"Rest",onPress:()=>{v(r.g8.Rest)},icon:()=>(0,n.jsx)(m.qyc,{})}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:w==r.g8.Profile?"solid":"outline",label:"Profile",onPress:()=>{v(r.g8.Profile)},icon:()=>(0,n.jsx)(h.p$z,{})}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:w==r.g8.PourOver?"solid":"outline",label:"Pour",onPress:()=>{v(r.g8.PourOver)},icon:()=>(0,n.jsx)(f._eR,{})}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:w==r.g8.Sound?"solid":"outline",label:"Sound",onPress:()=>{v(r.g8.Sound)},icon:()=>(0,n.jsx)(p.dfw,{})}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:w==r.g8.RGB?"solid":"outline",label:"RGB",onPress:()=>{v(r.g8.RGB)},icon:()=>(0,n.jsx)(y.$Vy,{})})]})})]})};var w=s(7094),v=s(4158);let k=e=>{let{value:t,onChange:s}=e,[r,l]=(0,o.useState)(!1);(0,o.useEffect)(()=>{l(!1)},[t]),(0,v.q)(()=>{s(!1)});let[i,a]=(0,o.useState)(!0);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" font-bold text-xl text-blue-800",onClick:()=>l(!0),children:i?"can skip":"must wait"}),r&&(0,n.jsx)(u.u_l,{autoFocus:!1,size:"small",title:"Set grinder behaviour",onClose:()=>l(!1),primaryAction:{label:"OK",onPress:()=>{l(!1),s(i)}},secondaryAction:{label:"Cancel",onPress:()=>l(!1)},children:(0,n.jsxs)(u.Kqy,{space:8,children:[(0,n.jsxs)(u.r5R,{space:8,columns:2,children:[(0,n.jsx)(u.zxk,{kind:i?"solid":"outline",hierarchy:"primary",label:"Can skip",onPress:()=>a(!0),icon:()=>(0,n.jsx)(w.PCn,{})}),(0,n.jsx)(u.zxk,{kind:i?"outline":"solid",hierarchy:"primary",label:"Must wait",onPress:()=>a(!1),icon:()=>(0,n.jsx)(h.fSQ,{})})]}),(0,n.jsx)(u.jL0,{kind:"informative",title:"Explaination",description:i?"Grinder will skip this step if portafilter is not in position":"Grinder will wait until the portafilter is in position, then it will start grinding "})]})})]})};var P=s(1111);let C=P.fC,N=P.xz,F=o.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:l=4,...i}=e;return(0,n.jsx)(P.h_,{children:(0,n.jsx)(P.VY,{ref:t,align:r,sideOffset:l,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});F.displayName=P.VY.displayName;let S=e=>{let{text:t}=e;return t.split(" ").map((e,t)=>(0,n.jsx)("h1",{className:"text-xl",children:e},t))};function T(e){let t,{index:s,subIndex:a=0}=e,[c,d]=(0,o.useState)(!1),[x,p]=(0,o.useState)(null),{formulas:h,setFormulas:m,selectedFormulaId:g}=(0,l.Z)(),{feedbacks:j}=(0,l.Z)(),f=h[g].steps[s];return(0,o.useRef)(null),t=f.action.actionType==r.g8.Profile?f.action.segments[a].value:f.target.value,(0,n.jsxs)(C,{onOpenChange:e=>{d(!1!=e)},open:c,children:[(0,n.jsx)(N,{children:(0,n.jsxs)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{d(!0)},children:[null!=x&&(0,n.jsx)("h1",{className:" font-bold text-xl text-green-800",onClick:()=>d(!0),children:"".concat((x/1e3).toFixed(1),"/")}),(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[t," ",t<=1?"second":"seconds"]})]})}),(0,n.jsxs)(F,{className:"w-80 rounded-xl border  space-y-8",children:[(0,n.jsx)(w.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{d(!1)}}),(0,n.jsx)(u.RWL,{value:t,onChange:e=>{m((0,i.Uy)(h,t=>{f.action.actionType==r.g8.Profile?f.action.segments[a].value=e:t[g].steps[s].target.value=e}))},label:"Time",type:"single",name:"value",minValue:0,maxValue:60,step:1})]})]})}let z=(e,t)=>{if(void 0===e)return;let s=[],n=0;e.forEach(e=>{n+=e.duration});var l=0,i=0;for(let n of e){for(var o=0;o<n.duration;o+=1){var a=i+(n.value-i)*(o/n.duration);a=Math.round(10*a)/10,t==r.jk.Pressure?s.push({Time:"At ".concat(l+o," seconds"),pressure:a,max:10,min:0}):t==r.jk.Flowrate?s.push({Time:"At ".concat(l+o," seconds"),flowrate:a,max:50,min:0}):t==r.jk.Power&&s.push({Time:"At ".concat(l+o," seconds"),power:a,max:100,min:0})}i=n.value,l+=n.duration}return s},R=e=>{let{index:t}=e;(0,v.q)(()=>{r((0,i.Uy)(s,e=>{let s=e[o].steps[t].action;return s.actionType="Profile",s.segments=s.segments||[],console.log("profile/ create object",s),0==e[o].steps[t].action.segments.length&&(e[o].steps[t].action.segments=[{duration:10,value:3}]),e}))});let{formulas:s,setFormulas:r,selectedFormulaId:o}=(0,l.Z)(),a=s[o].steps[t].action,c=(a.segments||[]).map((e,l)=>(0,n.jsxs)("div",{className:"flex flex-rol flex-wrap",children:[0==l?(0,n.jsx)(S,{text:"First, reach"}):(0,n.jsx)(S,{text:"then"}),(0,n.jsx)(E,{segments:a.segments,sensor:a.profilingType,setValue:e=>{r((0,i.Uy)(s,s=>{s[o].steps[t].action.segments[l].value=e}))},idx:l}),0==l?(0,n.jsx)(S,{text:"within"}):(0,n.jsx)(S,{text:"in"}),(0,n.jsx)(T,{index:t,subIndex:l}),(0,n.jsx)("h1",{className:"text-xl",children:l===a.segments.length-1?".":","})]},l));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{}),(0,n.jsx)("ul",{children:c}),(0,n.jsxs)("div",{className:"flex flex-row space-x-1 p-2  h-6 w-fit rounded-md bg-blue-100 items-center hover:scale-105 transition-transform duration-200 cursor-pointer",children:[(0,n.jsx)(m.wEH,{color:"#1180EF",size:16,onClick:()=>{r((0,i.Uy)(s,e=>{let s=e[o].steps[t].action;s.segments=s.segments||[],s.segments.push({duration:Math.floor(30*Math.random()),value:+(8*Math.random()+2).toFixed(1)})}))}}),(0,n.jsx)(m.iFH,{color:"#1180EF",size:16,onClick:()=>{void 0!==a.segments&&(a.segments.length<2||r((0,i.Uy)(s,e=>(e[o].steps[t].action.segments.pop(),e))))}})]})]})},A=e=>{let{index:t}=e,[s,i]=(0,o.useState)([]),{formulas:a,setFormulas:c,selectedFormulaId:d}=(0,l.Z)(),x=a[d].steps[t].action,p=x.profilingType,h=x.segments;(0,o.useEffect)(()=>{i(z(h,p))},[h,p]);let m={};return m[r.jk.Pressure]="pressure",m[r.jk.Flowrate]="flowrate",m[r.jk.Power]="power",(0,n.jsx)("div",{className:"w-full -translate-x-10 hover:scale-120 transition-transform duration-200",children:(0,n.jsx)(u.wWH,{height:300,dataKey:"Time",categories:[m[p]||"unknown sensor","current","max","min"],hideLegend:!1,hideXAxis:!0,hideYAxis:!1,data:s,disableAnimation:!0},t)})},E=e=>{let t,{segments:s,setValue:l,sensor:i,idx:a}=e,[c,d]=(0,o.useState)(!1);i==r.jk.Pressure&&(t="bar"),i==r.jk.Flowrate?t="gram/s":i==r.jk.Power&&(t="%");let x={[r.jk.Pressure]:10,[r.jk.Flowrate]:50,[r.jk.Power]:100};return(0,n.jsxs)(C,{onOpenChange:e=>{console.log("close",e),!1==e&&d(!1)},open:c,children:[(0,n.jsx)(N,{children:(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{d(!0)},children:(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",children:[s[a].value," ",t]})})}),(0,n.jsxs)(F,{className:"w-96 rounded-xl border min-w-96",children:[(0,n.jsx)(w.FMH,{className:"absolute top-2 right-2 text-gray-500",size:20,onClick:()=>{d(!1)}}),(0,n.jsx)(u.RWL,{value:s[a].value,onChange:e=>{l(e)},label:i,type:"single",name:"value",minValue:0,maxValue:x[i],step:.1})]})]})},_=e=>{let{index:t}=e,[s,a]=(0,o.useState)(!1),{formulas:c,setFormulas:d,selectedFormulaId:x}=(0,l.Z)(),p=c[x].steps[t].action,[h,m]=(0,o.useState)(p.profilingType||r.jk.Flowrate);return(0,o.useEffect)(()=>{a(!1)},[c]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" font-bold text-xl text-blue-800",onClick:()=>{a(!0)},children:p.profilingType||r.jk.Flowrate}),s&&(0,n.jsx)(u.u_l,{size:"small",title:"Select an profiling method",onClose:()=>a(!1),primaryAction:{label:"OK",onPress:()=>{a(!1),d((0,i.Uy)(c,e=>{e[x].steps[t].action.actionType=r.g8.Profile,e[x].steps[t].action.profilingType=h}))}},secondaryAction:{label:"Cancel",onPress:()=>a(!1)},children:(0,n.jsxs)(u.Kqy,{space:16,children:[(0,n.jsxs)(u.r5R,{space:8,columns:2,children:[(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:h==r.jk.Flowrate?"solid":"outline",label:"Flowrate",onPress:()=>{m(r.jk.Flowrate)}}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:h==r.jk.Pressure?"solid":"outline",label:"Pressure",onPress:()=>{m(r.jk.Pressure)}}),(0,n.jsx)(u.zxk,{hierarchy:"primary",kind:h==r.jk.Power?"solid":"outline",label:"Power",onPress:()=>{m(r.jk.Power)}})]}),(0,n.jsx)(u.jL0,{kind:"informative",title:"What is this ?",description:h==r.jk.Flowrate?"Flowrate is the amount of water that flows through the coffee bed in a given time":h==r.jk.Pressure?"Pressure is the force applied to the coffee bed":"Power is the energy applied to the coffee bed, purely control the pump power to achieve the result"})]})})]})},K=e=>{let{value:t,onChange:s}=e;console.log("action/ recreate");let[r,i]=(0,o.useState)(!1),{grinderSettings:a}=(0,l.Z)(),[c,d]=(0,o.useState)(t||"[select grinder]");return(0,v.q)(()=>{s("[select grinder]")}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:" font-bold text-xl text-blue-800",onClick:()=>i(!0),children:c}),r&&(0,n.jsx)(u.u_l,{size:"small",title:"Select ingredient",onClose:()=>i(!1),primaryAction:{label:"OK",onPress:()=>{i(!1),s(c)}},secondaryAction:{label:"Cancel",onPress:()=>i(!1)},children:(0,n.jsxs)(u.Kqy,{space:8,children:[(0,n.jsx)(u.gFv,{space:4,children:a.map((e,t)=>(0,n.jsx)(u.zxk,{kind:c==e.name?"solid":"outline",hierarchy:"primary",label:e.name,onPress:()=>d(e.name)},t))}),(0,n.jsx)(u.jL0,{kind:"informative",title:"Reminder",description:"You can set up your grinder in the settings, the hardware can be connected to the machine wirelessly to the espresso machine",action:{label:"Learn more",onPress:()=>{window.open("https://www.google.com")}}})]})})]})},O=e=>{let{value:t,onChange:s}=e,[r,l]=(0,o.useState)(!1),[i,a]=(0,o.useState)(t||0);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"rounded-lg w-fit h-8 p-2 justify-between items-center flex",onClick:()=>{l(!0)},children:(0,n.jsxs)("h1",{className:"font-bold text-xl text-blue-800",children:[t||0," %"]})}),r&&(0,n.jsx)(u.u_l,{size:"small",title:"Set pump power",onClose:()=>l(!1),primaryAction:{label:"OK",onPress:()=>{l(!1),console.log(" update power",i),s(i)}},secondaryAction:{label:"Cancel",onPress:()=>l(!1)},children:(0,n.jsxs)(u.Kqy,{space:8,children:[(0,n.jsx)(u.RWL,{type:"single",name:"power",value:i,onChange:e=>{console.log("Power is updated for pump",e),a(e)},label:"Pump Power",minValue:0,maxValue:100,step:1}),(0,n.jsx)(u.jL0,{kind:"informative",title:"Notice",description:"Power require an external pump to be connected to the machine, other wise it is simply ON/OFF",action:{label:"Learn more",onPress:()=>{window.open("https://www.google.com")}}})]})})]})};function U(e){let{index:t}=e,[s,a]=(0,o.useState)(!1),{formulas:c,setFormulas:d,selectedFormulaId:x}=(0,l.Z)(),p=c[x].steps[t],[h,m]=(0,o.useState)(p.target.value),[g,j]=(0,o.useState)(null);return(0,o.useRef)(null),(0,n.jsxs)(n.Fragment,{children:[null!=g&&(0,n.jsx)("h1",{className:" font-bold text-xl text-green-800",onClick:()=>a(!0),children:"".concat((g/10).toFixed(1),"/")}),(0,n.jsxs)("h1",{className:" font-bold text-xl text-blue-800",onClick:()=>a(!0),children:[p.target.value.toFixed(1),p.target.value<=1?" gram":" grams"]}),s&&(0,n.jsx)(u.u_l,{size:"small",title:"How much ?",onClose:()=>a(!1),primaryAction:{label:"OK",onPress:()=>{a(!1),d((0,i.Uy)(c,e=>{e[x].steps[t].target.targetType=r.YK.Weight,e[x].steps[t].target.value=h}))}},secondaryAction:{label:"Cancel",onPress:()=>a(!1)},children:(0,n.jsxs)(u.Kqy,{space:8,children:[(0,n.jsx)(u.RWL,{type:"single",name:"weight",value:h,onChange:m,label:"Weight",minValue:0,maxValue:100,step:1}),(0,n.jsx)(u.jL0,{kind:"informative",title:"Reminder",description:"Calibration is required for accurate weight, please go to Settings"})]})})]})}function G(e){let{onDelete:t,index:s}=e,[c,d]=(0,o.useState)("can skip"),{formulas:x,setFormulas:u,selectedFormulaId:p}=(0,l.Z)(),h=x[p].steps;return(0,n.jsxs)("div",{className:"flex flex-col  h-fit rounded-xl p-4 max-w-[calc(90vw)] w-96  border hover:border-blue-500  bg-white drop-shadow-xl hover:scale-105 transition-transform duration-200",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 p-2 cursor-pointer",onClick:()=>t(),children:(0,n.jsx)(a.maG,{className:"text-gray-300"})}),(0,n.jsxs)("div",{className:"inline-flex flex-wrap gap-2 items-center text-wrap max-w-96 space-x-1",children:[(0,n.jsx)(b,{index:s}),"Grind"===x[p].steps[s].action.actionType&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{index:s}),(0,n.jsx)(S,{text:"of"}),(0,n.jsx)(K,{value:h[s].action.ingredient,onChange:e=>{u((0,i.Uy)(x,t=>{t[p].steps[s].action.ingredient=e}))}}),(0,n.jsx)(S,{text:"bean, grinder"}),(0,n.jsx)(k,{value:h[s].action.canSkip,onChange:e=>{u((0,i.Uy)(x,t=>{t[p].steps[s].action.canSkip=e,t[p].steps[s].action.actionType=r.g8.Grind}))}}),!0===h[s].action.canSkip?(0,n.jsx)(S,{text:"this step is portafilter is absent"}):(0,n.jsx)(S,{text:"until portafilter is present"})]}),"Extract"===h[s].action.actionType&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{index:s}),(0,n.jsx)(S,{text:"with pump power"}),(0,n.jsx)(O,{value:h[s].action.power,onChange:e=>{u((0,i.Uy)(x,t=>{t[p].steps[s].action.actionType=r.g8.Extract,t[p].steps[s].action.power=e}))}})]}),h[s].action.actionType===r.g8.PourOver&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{index:s}),(0,n.jsx)(S,{text:"in"}),(0,n.jsx)(T,{subIndex:0,index:s})]}),"Rest"===h[s].action.actionType&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S,{text:"for"}),(0,n.jsx)(T,{subIndex:0,index:s}),h[s].action.valveState&&(0,n.jsx)(S,{text:"but keep valve open"})]}),"Profile"===h[s].action.actionType&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S,{text:"to extract"}),(0,n.jsx)(U,{index:s}),(0,n.jsx)(S,{text:"of espresso using"}),(0,n.jsx)(_,{index:s}),(0,n.jsx)(S,{text:"profiling"}),(0,n.jsx)(R,{index:s}),(0,n.jsx)(A,{index:s})]})]})]})}var V=s(1163),W=s(5948),Y=s(6281),q=s(8979),L=()=>{var e,t;let s=(0,V.useRouter)();s.query.slug;let[a,c]=(0,o.useState)(-1),[d,m]=(0,o.useState)(-1),[g,j]=(0,o.useState)(!1),[f,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(!0),{selectedFormulaId:v,registerSelectedFormulaId:k,setFormulas:P,formulas:C,setSelectedPage:N,registerFormulaClick:F,progressReport:S}=(0,l.Z)(),[T,z]=(0,o.useState)(!1);return(0,o.useEffect)(function(){z(!0)},[]),(0,o.useEffect)(()=>{console.log("lab/ re-render",v)},[v]),(0,n.jsxs)(q.default,{children:[g&&(0,n.jsxs)(u.u_l,{size:"large",autoFocus:!1,title:"Assign to Button",onClose:()=>j(!1),primaryAction:{label:"Download",onPress:()=>{w(!0),setTimeout(()=>{j(!1)},3e3)}},secondaryAction:{label:"Cancel",onPress:()=>j(!1)},children:[(0,n.jsx)(u.uTp,{size:"medium",children:"This process will save the formula to a physical button on your cofee machine so you don't always need a mobile device connected"}),(0,n.jsxs)("div",{className:"w-full h-32 flex flex-col space-y-4 p-4",children:[(0,n.jsx)(u.r5R,{space:8,columns:3,children:[1,2,3].map((e,t)=>(0,n.jsx)(u.zxk,{label:"Group ".concat(e),hierarchy:"primary",kind:t===a?"solid":"outline",onPress:()=>c(t)},t))}),(0,n.jsx)(u.r5R,{space:8,columns:4,children:[1,2,3,4].map((e,t)=>(0,n.jsx)(u.zxk,{label:"Button ".concat(e),hierarchy:"primary",kind:t===d?"solid":"outline",onPress:()=>m(t)},t))})]})]}),f&&(0,n.jsx)(u.u_l,{title:"Share",onClose:()=>y(!1),primaryAction:{label:"OK",onPress:()=>y(!1)},secondaryAction:{label:"Cancel",onPress:()=>y(!1)},children:(0,n.jsx)(u.uTp,{size:"medium",children:"Content"})}),(0,n.jsxs)("div",{className:"flex flex-col  items-center space-y-4 p-4",children:[(0,n.jsxs)("div",{className:" h-fit  rounded-xl max-w-[calc(90vw)] w-96 p-4 flex flex-col space-y-4 shadow-xl border",children:[(0,n.jsx)(u.nvn,{value:null===(e=C[v])||void 0===e?void 0:e.title,onChange:e=>{P((0,i.Uy)(C,t=>{console.log("Formulas",C,v),t[v].title=e}))},label:"Formula",placeholder:"Untitled formula"}),(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center space-x-1 text-white",children:[(null===(t=S[v])||void 0===t?void 0:t.isRunning)===!0?(0,n.jsxs)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-2/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-orange-400 to-red-400 text-white select-none",onClick:()=>{F(v)},children:[(0,n.jsx)(h.JuG,{}),(0,n.jsx)("h1",{children:"Stop"})]}):(0,n.jsxs)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-2/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-blue-400 to-emerald-400 text-white select-none",onClick:()=>{F(v)},children:[(0,n.jsx)(h.gmG,{}),(0,n.jsx)("h1",{children:"Play"})]}),(0,n.jsx)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-1/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-purple-800 via-violet-900 to-purple-800",onClick:()=>{console.log("download"),j(!0)},children:(0,n.jsx)(h.aBF,{})}),(0,n.jsx)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-1/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-blue-500 to-blue-600",onClick:()=>{y(!0)},children:(0,n.jsx)(h.PPi,{})}),(0,n.jsx)("div",{className:"rounded-xl border flex flex-row justify-evenly items-center bg-white p-4 h-12 w-1/5 cursor-pointer hover:border-blue-500 bg-gradient-to-r from-red-500 to-red-800",onClick:()=>{console.log("delete"),N("Formula"),k(null),P((0,i.Uy)(C,e=>{delete C[v]})),s.push("/")},children:(0,n.jsx)(h.zYX,{})})]})]}),(0,n.jsx)(x,{}),(0,n.jsxs)("div",{className:" flex flex-col py-3 justify-center items-center mix-w-80 ",children:[(0,n.jsx)(W.Z5,{onDragEnd:function(e,t){e.destination&&P((0,i.Uy)(C,t=>{let s=t[v],[n]=s.steps.splice(e.source.index,1);return s.steps.splice(e.destination.index,0,n),t}))},onBeforeDragStart:()=>{console.log("onBeforeDragStart")},onDragStart:()=>{console.log("onDragStart")},onDragUpdate:()=>{console.log("onDragUpdate")},children:(0,n.jsx)("div",{className:"flex flex-row w-full",children:(0,n.jsx)(W.bK,{droppableId:"ROOT",children:e=>{var t,s;return(0,n.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"flex flex-col w-full justify-between mx-auto items-center space-y-4",children:[null===(t=(null===(s=C[v])||void 0===s?void 0:s.steps)||[])||void 0===t?void 0:t.map((e,t)=>(console.log("render",{item:e,idx:t}),T&&(0,n.jsx)(W._l,{draggableId:null==e?void 0:e.id,index:t,children:s=>(0,n.jsx)("div",{className:"",...s.dragHandleProps,...s.draggableProps,ref:s.innerRef,children:(0,n.jsx)(G,{onDelete:()=>{var t;return t=null==e?void 0:e.id,void P((0,i.Uy)(C,e=>{let s=e[v];return s.steps=s.steps.filter(function(e){return(null==e?void 0:e.id)!==t}),e}))},index:t})})},null==e?void 0:e.id))),e.placeholder]})}})})}),(0,n.jsxs)("button",{className:"flex flex-row space-x-4 justify-center items-center rounded-xl border  cursor-pointer w-80 h-16 my-4 bg-blue-100",onClick:function(){P((0,i.Uy)(C,e=>{e[v].steps.push({id:(0,Y.Vj)(),action:{actionType:r.g8.Rest,valveState:!1},target:{targetType:r.YK.Time,value:10}})}))},children:[(0,n.jsx)(p.OzW,{color:"#1180EF",size:30}),(0,n.jsx)("p",{className:"text-[#1180EF] font-bold text-lg",children:"Add steps"})]})]})]})]})}}},function(e){e.O(0,[838,396,660,817,509,127,391,365,768,594,630,415,281,740,979,774,888,179],function(){return e(e.s=7503)}),_N_E=e.O()}]);