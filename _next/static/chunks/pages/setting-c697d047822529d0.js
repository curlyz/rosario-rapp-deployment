(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{45824:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return t(12982)}])},92290:function(e,s,t){"use strict";var l=t(67294),n=t(64331);s.Z=()=>(0,l.useContext)(n.Tp)},83842:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var l=t(85893),n=t(7016),r=t(61121),a=t(36977),i=t(37094),c=t(94554),o=t(92290);t(67294);var x=t(11163),d=()=>{let{connectButtonDisplay:e}=(0,o.Z)(),{selectedPage:s,setSelectedPage:t}=(0,o.Z)(),c=(0,x.useRouter)();return(0,l.jsx)("div",{className:"flex justify-center w-full fixed bottom-0 bg-white z-50",children:(0,l.jsx)(n.eBu,{space:4,children:(0,l.jsxs)("div",{className:"flex justify-between  flex-row",children:[(0,l.jsx)(n.zxk,{hierarchy:"Formula"===s?"primary":"secondary",kind:"transparent",label:"Formula",icon:()=>(0,l.jsx)(r.h1P,{}),onPress:()=>{t("Formula"),c.push("/")}}),(0,l.jsx)(n.zxk,{hierarchy:"Alchemy"===s?"primary":"secondary",kind:"transparent",label:"Lab",icon:()=>(0,l.jsx)(a.b6W,{}),onPress:()=>{t("Alchemy"),c.push("/lab")}}),(0,l.jsx)(n.zxk,{hierarchy:"Setting"===s?"primary":"secondary",kind:"transparent",label:"Settings",icon:()=>(0,l.jsx)(i.Fnt,{}),onPress:()=>{t("Setting"),c.push("/setting")}})]})})})},u=t(30080),m=()=>{let{connectButtonStyle:e,connectButtonText:s,selectedPage:t}=(0,o.Z)();return(0,l.jsxs)("div",{className:"flex justify-between items-center m-4",children:[(0,l.jsx)(n.s01,{size:"small",children:t}),(0,l.jsx)(n.zxk,{label:s,hierarchy:"primary",icon:()=>(0,l.jsx)(u.Vdu,{}),onPress:()=>{(0,c.s0)()},kind:e})]})},h=e=>{let{children:s}=e;return(0,l.jsxs)(n.Kqy,{space:4,children:[(0,l.jsx)(m,{}),s,(0,l.jsx)(d,{})]})}},12982:function(e,s,t){"use strict";t.r(s),t.d(s,{SettingsPage:function(){return E},default:function(){return _}});var l=t(85893),n=t(7016),r=t(86204),a=t(71054),i=t(30080),c=t(67294),o=t(67898),x=t(24862),d=t(19314),u=t(22845),m=t(55903),h=t(64399),j=t(19151),f=t(58908),p=t(52091),g=t(90512),y=t(98388);function w(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,y.m6)((0,g.W)(s))}let v=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:s,className:w("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});v.displayName="Card";let b=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:s,className:w("flex flex-col space-y-1.5 p-6",t),...n})});b.displayName="CardHeader";let N=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("h3",{ref:s,className:w("text-2xl font-semibold leading-none tracking-tight",t),...n})});N.displayName="CardTitle";let C=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("p",{ref:s,className:w("text-sm text-muted-foreground",t),...n})});C.displayName="CardDescription";let k=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:s,className:w("p-6 pt-0",t),...n})});k.displayName="CardContent";let P=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,l.jsx)("div",{ref:s,className:w("flex items-center p-6 pt-0",t),...n})});P.displayName="CardFooter";var R=t(92290),z=t(93513);let T=e=>{let{index:s}=e,{pidState:t,setPidState:r,pidDisplay:a}=(0,R.Z)(),{connected:o}=(0,R.Z)(),[x,d]=(0,c.useState)(Array(100).fill({temperature:0,power:0}));(0,c.useEffect)(()=>{if(console.warn("draft",a[s]),void 0==a[s].powerSamples)return;let e=[];for(var l=0;l<a[s].powerSamples.length;l++)e.push({power:a[s].powerSamples[l],temperature:a[s].temperatureSamples[l],target:t[s].targetTemperature});d(e)},[a,s,t]);let u=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.RWL,{type:"single",name:"value",label:"Temperature",value:t[s].targetTemperature,onChange:e=>{r((0,z.Uy)(t,t=>{t[s].targetTemperature=e}))},minValue:30,maxValue:200,step:1,disabled:!o}),(0,l.jsx)(n.RWL,{type:"single",name:"value",label:"Active Range",value:t[s].activeRange,onChange:e=>{r((0,z.Uy)(t,t=>{t[s].activeRange=e}))},minValue:0,maxValue:10,step:1,disabled:!o}),(0,l.jsx)(n.RWL,{type:"single",name:"value",label:"Proportional",value:t[s].proportional,onChange:e=>{r((0,z.Uy)(t,t=>{t[s].proportional=e}))},minValue:0,maxValue:10,step:.1,disabled:!o}),(0,l.jsx)(n.RWL,{type:"single",name:"value",label:"integral",value:t[s].integral,onChange:e=>{r((0,z.Uy)(t,t=>{t[s].integral=e}))},minValue:0,maxValue:1,step:.1,disabled:!o}),(0,l.jsx)(n.RWL,{type:"single",name:"value",label:"Derivative",value:t[s].derivative,onChange:e=>{r((0,z.Uy)(t,t=>{t[s].derivative=e}))},minValue:0,maxValue:10,step:.1,disabled:!o})]}),[g,y]=(0,c.useState)(!1),w=(0,l.jsxs)("div",{className:"flex flex-wrap justify-center space-x-1 space-y-1 mb-4",children:[(0,l.jsx)(n.zxk,{onPress:()=>{},hierarchy:"secondary",kind:"outline",label:"90%",size:"small",icon:()=>(0,l.jsx)(f.w$t,{})}),(0,l.jsx)(n.zxk,{onPress:()=>{},hierarchy:"secondary",kind:"outline",label:"90*C",size:"small",icon:()=>(0,l.jsx)(p.YzZ,{})}),(0,l.jsx)(n.zxk,{onPress:()=>{},hierarchy:"primary",kind:"outline",label:"Test",size:"small",icon:()=>(0,l.jsx)(j.WuV,{})}),(0,l.jsx)(n.zxk,{onPress:()=>{r((0,z.Uy)(t,e=>{e[s].targetTemperature=110,e[s].activeRange=2,e[s].proportional=3.2,e[s].integral=.2,e[s].derivative=5}))},hierarchy:"danger",kind:"outline",size:"small",label:"Reset",icon:()=>(0,l.jsx)(h.Z4w,{})})]});return(0,l.jsxs)(v,{className:"w-auto",children:[(0,l.jsxs)(b,{children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)(N,{children:["Channel ",s+1]}),(0,l.jsx)(n.rsf,{value:t[s].isActive,onChange:e=>{r((0,z.Uy)(t,t=>{t[s].isActive=e}))},disabled:!o,label:"Active"})]}),(0,l.jsx)(m.j,{}),(0,l.jsx)(C,{children:t[s].isActive?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(v,{className:"h-40 bg-white",children:[(0,l.jsx)(n.wWH,{hideLegend:!1,hideXAxis:!0,dataKey:"name",categories:["temperature","power","target"],disableAnimation:!0,hideYAxis:!0,hideTooltip:!1,data:x})," "]})}):(0,l.jsx)(l.Fragment,{children:"This PID channel is currently disabled"})})]}),t[s].isActive?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k,{children:g?(0,l.jsxs)(l.Fragment,{children:[w,u]}):null}),(0,l.jsx)(P,{onClick:()=>{y(!g)},className:"justify-center",children:g?(0,l.jsx)(i.Faw,{}):(0,l.jsx)(i.Yc6,{})})]}):null]})},A=e=>{let{index:s}=e,[t,r]=(0,c.useState)(0),[a,i]=(0,c.useState)(0);return(0,l.jsx)(n.eBu,{space:4,children:(0,l.jsxs)("div",{className:"h-8 w-fit  flex-grow flex flex-col items-center space-y-3 ",children:[(0,l.jsx)("h1",{className:"text-white text-4xl",children:"20"}),(0,l.jsx)("h1",{className:"text-zinc-100",children:"ms/s"})]})})},F=e=>{let{key:s,index:t}=e,{grinderSettings:a,setGrinderSettings:c}=(0,R.Z)();return console.log("Grinder/ create ",s),(0,l.jsxs)("div",{className:"flex flex-col  rounded-xl bg-white p-4 space-y-4",children:[(0,l.jsx)(n.nvn,{name:"ingredient",label:"Ingredient",placeholder:"What is the coffee bean ?",value:a[t].name,onChange:e=>{c((0,z.Uy)(a,s=>{s[t].name=e}))}}),(0,l.jsx)("div",{className:"flex flex-row justify-stretch space-x-4 flex-grow",children:(0,l.jsxs)(n.oeA,{space:8,children:[(0,l.jsx)(n.sgG,{width:"4/5",children:(0,l.jsx)(n.mgC,{value:a[t].connectionType,onChange:e=>{c((0,z.Uy)(a,s=>{s[t].connectionType=e}))},name:"connectionType",label:"Connection",placeholder:"How is the grinder connected ?",options:[{value:"wire",label:"Wire",kind:"two-line",secondLine:"Direct wiring using the PID port"},{value:"ble",label:"Bluetooth",kind:"two-line",secondLine:"Pair to a Bluetooth scale"}]})}),(0,l.jsx)(n.sgG,{width:"1/5",children:(0,l.jsx)(n.Ki0,{name:"ID",value:a[t].connectionId,onChange:e=>{c((0,z.Uy)(a,s=>{s[t].connectionId=e}))},label:"ID"})})]})}),(0,l.jsxs)("div",{className:"flex flex-row my-4 space-x-4",children:[(0,l.jsx)(n.zxk,{label:"Calibrate",onPress:()=>{},hierarchy:"primary",kind:"outline",icon:()=>(0,l.jsx)(r.mdD,{})}),(0,l.jsx)(n.zxk,{label:"Test",onPress:()=>{},hierarchy:"primary",kind:"outline",icon:()=>(0,l.jsx)(j.WuV,{})}),(0,l.jsx)(n.zxk,{label:"Remove",onPress:()=>{},hierarchy:"danger",kind:"outline",icon:()=>(0,l.jsx)(i.ZkW,{})})]})]})};var S=t(83842);let I=()=>{let[e,s]=(0,c.useState)(!1),[t,a]=(0,c.useState)(!1),m=()=>{s(!e),console.log("toggle expand")},h=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if(!e&&h.current){let e=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--navbar-height"),10),s=h.current.getBoundingClientRect().top-e;window.scrollTo({top:s,behavior:"smooth"})}},[e]),(0,l.jsxs)(o.w,{ref:h,className:"w-auto bg-gradient-to-r from-purple-600 to-red-600 transition duration-500 transform hover:scale-105",children:[(0,l.jsxs)(x.u,{className:"h-16 flex items-center justify-between flex-row",onClick:m,children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(r.YzZ,{className:"ml-4 text-white"}),(0,l.jsx)("h2",{className:"text-white font-bold mx-4",children:"Heater"})]}),e?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.Ix0,{className:"mr-4 text-white"})}):(0,l.jsx)(i.AeI,{className:"mr-4 text-white"})]}),e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.G,{className:"flex flex-col justify-center space-y-4 py-4 w-full",children:[(0,l.jsx)(T,{index:0}),(0,l.jsx)(T,{index:1}),(0,l.jsx)(T,{index:2})]}),(0,l.jsx)(u.i,{onClick:m,className:"justify-center align-center",children:(0,l.jsx)(i.rWj,{className:"text-white m-4"})})]}):null,t&&(0,l.jsx)(n.u_l,{title:"Calibrate flowmeter",size:"small",onClose:()=>a(!1),primaryAction:{label:"OK",onPress:()=>a(!1)},secondaryAction:{label:"Cancel",onPress:()=>a(!1)},autoFocus:!1,children:(0,l.jsx)(n.eBu,{space:4,children:(0,l.jsx)(n.uTp,{size:"medium",children:"Content"})})})]})},V=()=>{let[e,s]=(0,c.useState)(!1),t=()=>{s(!e),console.log("toggle expand")},n=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if(!e&&n.current){let e=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--navbar-height"),10),s=n.current.getBoundingClientRect().top-e;window.scrollTo({top:s,behavior:"smooth"})}},[e]),(0,l.jsxs)(o.w,{ref:n,className:"my-4 bg-gradient-to-r from-blue-600 to-green-600 w-auto transition duration-500 transform hover:scale-105",children:[(0,l.jsxs)(x.u,{className:"h-16 flex items-center justify-between flex-row",onClick:t,children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(r.E3g,{className:"ml-4 text-white"}),(0,l.jsx)("h2",{className:"text-white font-bold mx-4",children:"Flowmeter"})]}),e?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.Ix0,{className:"mr-4 text-white"})}):(0,l.jsx)(i.AeI,{className:"mr-4 text-white"})]}),e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-evenly space-x-4 py-4 w-full flex-grow",children:[(0,l.jsx)(A,{index:0}),(0,l.jsx)(A,{index:1}),(0,l.jsx)(A,{index:2})]}),(0,l.jsx)(u.i,{onClick:t,className:"justify-center align-center",children:(0,l.jsx)(i.rWj,{className:"text-white m-4"})})]}):null]})},W=()=>{let[e,s]=(0,c.useState)(!1),{grinderSettings:t}=(0,R.Z)(),n=()=>{s(!e),console.log("toggle expand")},r=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if(!e&&r.current){let e=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--navbar-height"),10),s=r.current.getBoundingClientRect().top-e;window.scrollTo({top:s,behavior:"smooth"})}},[e]),(0,l.jsxs)(o.w,{ref:r,className:"bg-gradient-to-r from-orange-600 to-yellow-600 w-auto transition duration-500 transform hover:scale-105",children:[(0,l.jsxs)(x.u,{className:"h-16 flex items-center justify-between flex-row",onClick:n,children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(a.nXt,{className:"ml-4 text-white"}),(0,l.jsx)("h2",{className:"text-white font-bold mx-4",children:"Grinder"})]}),e?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.Ix0,{className:"mr-4 text-white"})}):(0,l.jsx)(i.AeI,{className:"mr-4 text-white"})]}),e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.G,{className:"flex flex-col justify-center space-y-4 py-4 w-full",children:t.map((e,s)=>(console.log("Grinder/ create with",{item:e,index:s}),(0,l.jsx)(F,{index:s},s)))}),(0,l.jsx)(u.i,{onClick:n,className:"justify-center align-center",children:(0,l.jsx)(i.rWj,{className:"text-white m-4"})})]}):null]})},E=()=>(0,l.jsx)(S.default,{children:(0,l.jsx)(n.eBu,{space:16,children:(0,l.jsxs)("div",{children:[(0,l.jsx)(I,{}),(0,l.jsx)(V,{}),(0,l.jsx)(W,{})]})})});var _=E}},function(e){e.O(0,[838,817,509,698,391,653,510,127,396,365,725,536,774,888,179],function(){return e(e.s=45824)}),_N_E=e.O()}]);