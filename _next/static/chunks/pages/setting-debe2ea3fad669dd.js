(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{45824:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return t(45506)}])},77505:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(85893),l=t(67294),n=t(12780),r=t(23482);const i=l.forwardRef(((e,s)=>{let{className:t,orientation:l="horizontal",decorative:i=!0,...c}=e;return(0,a.jsx)(n.f,{ref:s,decorative:i,orientation:l,className:(0,r.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",t),...c})}));i.displayName=n.f.displayName},45506:function(e,s,t){"use strict";t.r(s),t.d(s,{SettingsPage:function(){return D},default:function(){return $}});var a=t(85893),l=t(62646),n=t(86204),r=t(67294),i=t(65058),c=t(37039),o=t(93513),x=t(23482);const d=r.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})}));d.displayName="Card";const m=r.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("flex flex-col space-y-1.5 p-6",t),...l})}));m.displayName="CardHeader";const u=r.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,x.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})}));u.displayName="CardTitle";const h=r.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,x.cn)("text-sm text-muted-foreground",t),...l})}));h.displayName="CardDescription";const f=r.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("p-6 pt-0",t),...l})}));f.displayName="CardContent";const j=r.forwardRef(((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,x.cn)("flex items-center p-6 pt-0",t),...l})}));j.displayName="CardFooter";var p=t(30080),w=t(59463);const g=e=>{let{index:s}=e;const{connected:t,calibration:n,setCalibration:x}=(0,i.Z)(),[j,g]=(0,r.useState)(new Array(100).fill({temperature:0,power:0})),{t:b}=(0,c.$G)(),{flowmeterDisplay:N}=(0,i.Z)(),[y,v]=(0,r.useState)(!1),k=(0,a.jsx)(a.Fragment,{}),[C,S]=(0,r.useState)(!0),[R,A]=(0,r.useState)(N[s].flowCount),[F,P]=(0,r.useState)(1e3);return(0,r.useEffect)((()=>{A(N[s].flowCount)}),[N,s]),(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsx)(l.u_l,{size:"small",title:b("Calibrate flowmeter"),onClose:()=>v(!1),primaryAction:{label:"OK",onPress:()=>{v(!1),function(){var e=R,t=e/N[s].flowCount*n.flowmeter[s];console.log("calibration/ ",{calibration:n,suggestedValue:e,previousValue:N[s].flowCount,currentCalibration:n.flowmeter[s],newCalibration:t}),t<0||t>1e3?console.warn("Invalid calibation"):x((0,o.Uy)(n,(e=>(e.flowmeter[s]=t,e))))}()}},secondaryAction:{label:"Cancel",onPress:()=>v(!1)},children:(0,a.jsxs)(l.Kqy,{space:8,children:[(0,a.jsx)(l.jL0,{kind:"informative",title:b("Notice"),description:b("This calibration process is to set the conversion between flowmeter pulses count with the actual total weight of water extracted, specify how much it is actually weight to update the conversion"),action:{label:b("Learn more"),onPress:()=>{window.open("https://www.google.com")}}}),(0,a.jsx)(l.RWL,{type:"single",name:"value",label:b("Real weight (gram)"),value:R,onChange:e=>{A(e)},minValue:0,maxValue:F,step:1})]})}),(0,a.jsxs)(d,{className:(0,w.cn)("w-auto m-4 border",N[s].flowRate>0?" text-green-900 border border-green-600":"border-black border text-black"),children:[(0,a.jsxs)(m,{children:[(0,a.jsxs)("div",{className:"flex justify-between space-x-1",children:[(0,a.jsxs)(u,{children:[b("Group")," ",s+1]}),(0,a.jsx)("button",{onClick:function(){0!=R&&(P(Math.max(2*R,200)),v(!0))},style:{borderRadius:"8px",border:"1px solid",padding:"8px 8px"},children:(0,a.jsx)(p.b9P,{})})]}),(0,a.jsx)(l.izJ,{}),(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"h-16  flex flex-col justify-evenly space-y-4 mt-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:b("Flowrate ")}),(0,a.jsxs)("h1",{className:"text-xl",children:[N[s].flowRate," gram/s"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:b("Weight")}),(0,a.jsxs)("h1",{className:"text-xl",children:[N[s].flowCount," gram"]})]})]})})]}),(0,a.jsx)(f,{children:C?(0,a.jsx)(a.Fragment,{children:k}):null})]})]})};var b=t(55903),N=t(64399),y=t(19151);const v=e=>{let{index:s}=e;const{pidState:t,setPidState:n,pidDisplay:x}=(0,i.Z)(),{connected:w}=(0,i.Z)(),[g,v]=(0,r.useState)(new Array(100).fill({temperature:0,power:0}));(0,r.useEffect)((()=>{if(void 0==x[s].powerSamples)return;const e=[];for(var a=0;a<x[s].powerSamples.length;a++)e.push({power:x[s].powerSamples[a],temperature:Math.round(10*x[s].temperatureSamples[a])/10,target:Math.round(10*t[s].targetTemperature)/10});v(e)}),[x,s,t]);const{t:k}=(0,c.$G)();(0,r.useEffect)((()=>{}),[x,s,t]);const C=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.RWL,{type:"single",name:"value",label:k("Temperature"),value:t[s].targetTemperature,onChange:e=>{n((0,o.Uy)(t,(t=>(t[s].targetTemperature=e,t))))},minValue:0,maxValue:200,step:1,disabled:!w}),(0,a.jsx)(l.RWL,{type:"single",name:"value",label:k("Active Range"),value:t[s].activeRange,onChange:e=>{n((0,o.Uy)(t,(t=>(t[s].activeRange=e,t))))},minValue:0,maxValue:10,step:1,disabled:!w})]}),[S,R]=(0,r.useState)(!0),A=(0,a.jsxs)("div",{className:"flex flex-wrap justify-center space-x-1 space-y-1 mb-4",children:[(0,a.jsx)(l.zxk,{onPress:()=>{},hierarchy:"primary",kind:"outline",label:"Test",size:"small",icon:()=>(0,a.jsx)(y.WuV,{})}),(0,a.jsx)(l.zxk,{onPress:()=>{n((0,o.Uy)(t,(e=>{e[s].targetTemperature=110,e[s].activeRange=2,e[s].proportional=3.2,e[s].integral=.2,e[s].derivative=5})))},hierarchy:"danger",kind:"outline",size:"small",label:"Reset",icon:()=>(0,a.jsx)(N.Z4w,{})})]});return(0,a.jsxs)(d,{className:"w-auto",children:[(0,a.jsxs)(m,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(u,{children:[k("Channel")," ",s+1]}),(0,a.jsx)(l.rsf,{value:t[s].isActive,onChange:e=>{n((0,o.Uy)(t,(t=>(t[s].isActive=e,t))))},label:k("Active")})]}),(0,a.jsx)(b.j,{}),(0,a.jsx)(h,{children:t[s].isActive?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(d,{className:"h-40 bg-white",children:[(0,a.jsx)(l.wWH,{hideLegend:!1,hideXAxis:!0,dataKey:"name",categories:["temperature","power","target"],disableAnimation:!0,hideYAxis:!0,hideTooltip:!1,data:g})," "]})}):(0,a.jsx)(a.Fragment,{children:k("This PID channel is currently disabled")})})]}),t[s].isActive?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{children:S?(0,a.jsxs)(a.Fragment,{children:[A,C]}):null}),(0,a.jsx)(j,{onClick:()=>{R(!S)},className:"justify-center",children:S?(0,a.jsx)(p.Faw,{}):(0,a.jsx)(p.Yc6,{})})]}):null]})};var k=t(62740),C=t(24862),S=t(19314),R=t(22845),A=t(11163),F=t(93181),P=t(7696),T=t(52091),_=t(12006);const W=e=>{let{index:s}=e;const{pidState:t,setPidState:l,pidDisplay:n}=(0,i.Z)(),{connected:o}=(0,i.Z)(),{t:x}=(0,c.$G)(),[w,g]=(0,r.useState)(!0);return(0,a.jsxs)(d,{className:"w-auto m-4",children:[(0,a.jsxs)(m,{children:[(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsxs)(u,{children:[x("Channel")," ",s+1]})}),(0,a.jsx)(b.j,{}),(0,a.jsx)(h,{})]}),t[s].isActive?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{children:w?(0,a.jsx)(a.Fragment,{}):null}),(0,a.jsx)(j,{onClick:()=>{g(!w)},className:"justify-center",children:w?(0,a.jsx)(p.Faw,{}):(0,a.jsx)(p.Yc6,{})})]}):null]})};var L=t(8714),I=t(77505);const G=()=>{const{t:e}=(0,c.$G)(),[s,t]=(0,L._)("pidSettings",!1),[i,o]=(0,r.useState)(!1),x=()=>{t(!s)},d=(0,r.useRef)(null);return(0,a.jsxs)(k.w,{ref:d,className:"w-full max-w-2xl transform bg-gradient-to-r from-white to-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:x,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.YzZ,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:e("Heater")})]}),s?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),s?(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(l.jL0,{kind:"positive",title:"What is Heater ?",description:"There are 3 channel of PID-enabled heater. You can configure each channel with temperature setpoint. We support the following type of sensor: DS18B20, NTC(10K), NTC(100K). DS18B20 is strongly recommended"}),(0,a.jsxs)(S.G,{className:"flex w-full flex-col justify-center  py-4",children:[(0,a.jsx)(v,{index:0}),(0,a.jsx)(v,{index:1}),(0,a.jsx)(v,{index:2})]}),(0,a.jsx)(R.i,{onClick:x,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null,i&&(0,a.jsx)(l.u_l,{title:"Calibrate flowmeter",size:"small",onClose:()=>o(!1),primaryAction:{label:"OK",onPress:()=>o(!1)},secondaryAction:{label:"Cancel",onPress:()=>o(!1)},autoFocus:!1,children:(0,a.jsx)(l.eBu,{space:4,children:(0,a.jsx)(l.uTp,{size:"medium",children:"Content"})})})]})},Z=()=>{const[e,s]=(0,L._)("flowmeterSettings",!1),{t:t}=(0,c.$G)(),i=()=>{s(!e)},o=(0,r.useRef)(null);return(0,a.jsxs)(k.w,{ref:o,className:"w-full max-w-2xl transform bg-gradient-to-r bg-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:i,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.E3g,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:t("Flowmeter")})]}),e?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),e?(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(l.jL0,{kind:"positive",title:"What is flowmeter ?",description:"Flowmeter is used to measure how much water is going to the puck, note that this is not much coffee you get because there is always water losses inside the puck, or simply released"}),(0,a.jsx)(l.jL0,{kind:"informative",title:"How to calibrate ?",description:"First, place a scale underneath each group, press any water button. Water will come out, wait until it reach around 100 grams, hit stop. Then click the Calibrate button and input the ACTUAL weight",action:{label:"See Video",onPress:()=>{}}}),(0,a.jsxs)("div",{className:"flex w-full flex-row flex-wrap justify-evenly",children:[(0,a.jsx)(g,{index:0}),(0,a.jsx)(g,{index:1}),(0,a.jsx)(g,{index:2})]}),(0,a.jsx)(R.i,{onClick:i,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},z=()=>{const[e,s]=(0,L._)("pressureSettings",!1),{t:t}=(0,c.$G)(),n=()=>{s(!e),console.log("toggle expand")},i=(0,r.useRef)(null);return(0,a.jsxs)(k.w,{ref:i,className:"w-full max-w-2xl transform bg-gradient-to-r from-white to-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:n,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(F.vlJ,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:t("Pressure")})]}),e?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),e?(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(l.jL0,{kind:"positive",title:"What is Pressure sensor ?",description:"Pressure sensor is used to measure the pressure at puck, this reflect. There is 2 channel on ROSARIO. To ensure every shot of espresso are the same, the machine will also check if the pressure profiling match it's previous and display error. Normally due to wrong coffee compression method"}),(0,a.jsx)(l.jL0,{kind:"informative",title:"How to calibrate ?",description:"There are lots of pressure sensor type with different ranges. The highest pressure in coffee machine is around 12 bar (1.2Mpa) so you should get one above this limit and specify the range below.",action:{label:"See Video",onPress:()=>{}}}),(0,a.jsxs)("div",{className:"flex w-full flex-col justify-center space-y-4 py-4",children:[(0,a.jsx)(W,{index:0}),(0,a.jsx)(W,{index:1})]}),(0,a.jsx)(R.i,{onClick:n,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},V=()=>{const{locale:e,locales:s,defaultLocale:t}=(0,A.useRouter)(),[l,n]=(0,L._)("keyboardSettings",!1),{grinderSettings:o}=(0,i.Z)(),{t:x}=(0,c.$G)(),d=()=>{n(!l)},m=(0,r.useRef)(null);return(0,a.jsxs)(k.w,{ref:m,className:"w-full max-w-2xl transform bg-gradient-to-r bg-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:d,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(P.Ll6,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:x("Keyboard")})]}),l?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.G,{className:"flex w-full flex-col justify-center space-y-4 py-4"}),(0,a.jsx)(R.i,{onClick:d,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},E=()=>{const{locale:e,locales:s,defaultLocale:t}=(0,A.useRouter)(),[n,o]=(0,L._)("networkSettings",!1),{grinderSettings:x}=(0,i.Z)(),{t:d}=(0,c.$G)(),m=()=>{o(!n),console.log("toggle expand")},u=(0,r.useRef)(null),[h,f]=(0,r.useState)(""),[j,w]=(0,r.useState)("");return(0,a.jsxs)(k.w,{ref:u,className:"w-full max-w-2xl transform bg-gradient-to-tr bg-white transition duration-500 select-none",children:[(0,a.jsxs)(C.u,{className:"flex h-16 flex-row items-center justify-between",onClick:m,children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(T._0,{className:"ml-4 text-black"}),(0,a.jsx)("h2",{className:"mx-4 font-bold text-black",children:d("Network")})]}),n?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Ix0,{className:"mr-4 text-black"})}):(0,a.jsx)(p.AeI,{className:"mr-4 text-black"})]}),n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(S.G,{className:"flex w-full justify-center space-y-4 p-8",children:[(0,a.jsx)(l.nvn,{name:"Wifi",label:"Wifi",placeholder:"",value:h,onChange:e=>f(e)}),(0,a.jsx)(l.nvn,{name:"Password",label:"Password",placeholder:"",value:j,onChange:e=>w(e)}),(0,a.jsx)(I.Z,{})]}),(0,a.jsx)(R.i,{onClick:m,className:"align-center justify-center",children:(0,a.jsx)(p.rWj,{className:"m-4 text-black"})})]}):null]})},D=()=>(0,a.jsx)(_.default,{children:(0,a.jsxs)("div",{className:" flex flex-col items-center  p-8 space-y-4",children:[(0,a.jsx)(G,{}),(0,a.jsx)(Z,{}),(0,a.jsx)(z,{}),(0,a.jsx)(V,{}),(0,a.jsx)(E,{})]})});var $=D},59463:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(90512),l=t(98388);function n(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.m6)((0,a.W)(s))}}},function(e){e.O(0,[838,396,660,817,509,365,391,653,317,648,578,426,18,6,774,888,179],(function(){return s=45824,e(e.s=s);var s}));var s=e.O();_N_E=s}]);
//# sourceMappingURL=setting-debe2ea3fad669dd.js.map